import{r,j as t}from"./app-BqWlvYXa.js";import{I as f}from"./index-CUoOnZQC.js";import{B as l}from"./Box-BUJooizW.js";import{T as x}from"./Typography-KjnR0wxH.js";import{G as C}from"./Grid-BbxAfLGf.js";import{B as R}from"./Button-B6_tUdkC.js";import"./createSvgIcon-CwdkiJb4.js";import"./School-DlE_rjWc.js";import"./Close-DHgTCRnG.js";import"./Person-BInG0x4x.js";import"./Edit-CF_MWt6O.js";import"./MenuBook-4VUTt_ir.js";import"./Logout-h3QwyMd0.js";import"./useThemeProps-CT_TUxfz.js";import"./getThemeProps-VTvsTMSr.js";import"./isMuiElement-C0bkQkL3.js";function V({subject:a,test:m}){const c=m.test_questions,[s,S]=r.useState(0),[n,h]=r.useState("show"),[p,g]=r.useState(null),[d,I]=r.useState([]),[w,k]=r.useState(!1),j=c[s],i=r.useMemo(()=>j.question_text.split(",").map(e=>e.trim()),[j]),v=r.useMemo(()=>{const e=T(i,8-i.length);return b([...i,...e])},[s]);r.useEffect(()=>{if(n==="show"){let e=0;const o=setInterval(()=>{e<i.length?(g(i[e]),e++):(clearInterval(o),g(null),setTimeout(()=>h("select"),500))},1e3);return()=>clearInterval(o)}},[n,s]);const q=e=>{if(n!=="select")return;const o=d.includes(e)?d.filter(u=>u!==e):[...d,e];I(o)},B=()=>{h("feedback"),setTimeout(()=>{s+1<c.length?(S(s+1),h("show"),I([])):k(!0)},3e3)},E=e=>{const o=f[e],u=d.includes(e),y=i.includes(e),M=n==="feedback"?u?y?"green":"red":y?"green":"gray":u?"blue":"gray";return t.jsx(C,{item:!0,xs:6,sm:4,md:3,lg:3,children:t.jsx(l,{onClick:()=>q(e),sx:{backgroundColor:"white",border:`3px solid ${M}`,borderRadius:2,p:2,cursor:n==="select"?"pointer":"default",width:"100%",height:200,boxShadow:2,display:"flex",alignItems:"center",justifyContent:"center",maxWidth:200,mx:"auto"},children:o?t.jsx(o,{sx:{fontSize:90}}):e})},e)};return w?t.jsx(l,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",children:t.jsx(x,{variant:"h4",children:"¡Examen finalizado!"})}):t.jsxs(l,{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",px:2,textAlign:"center",children:[t.jsxs(x,{variant:"h5",children:["Pregunta ",s+1," de ",c.length]}),n==="show"&&p&&t.jsx(l,{mt:5,display:"flex",justifyContent:"center",alignItems:"center",height:"300px",children:t.jsx(l,{sx:{backgroundColor:"white",border:"3px solid #ccc",borderRadius:2,width:200,height:200,boxShadow:3,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const e=f[p];return e?t.jsx(e,{sx:{fontSize:90}}):null})()})}),(n==="select"||n==="feedback")&&t.jsxs(t.Fragment,{children:[t.jsx(x,{mt:3,children:"Selecciona los iconos que recuerdas"}),t.jsx(C,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",mt:2,maxWidth:"lg",children:v.map(E)}),n==="select"&&t.jsx(R,{variant:"contained",onClick:B,sx:{mt:3},children:"Confirmar selección"})]})]})}function T(a=[],m=5){const c=Object.keys(f).filter(s=>!a.includes(s));return b(c).slice(0,m)}function b(a){return[...a].sort(()=>Math.random()-.5)}export{V as default};
