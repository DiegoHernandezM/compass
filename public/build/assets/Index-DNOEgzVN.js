import{r as s,j as e,u as g,H as k}from"./app-uPHnM-9B.js";import{D as O,A}from"./AuthenticatedLayout-Dfq-pnBY.js";import{E as B,D as F}from"./Edit-D5XGiNtp.js";import{d as j}from"./index-C98WRUbk.js";import{C as T}from"./Close-TZJWjS65.js";import{B as c}from"./Box-B8fhjqIR.js";import{T as S}from"./Modal-DCnd3rmx.js";import{I as y}from"./Alert-BvGJ135m.js";import{T as w}from"./TextField-XySjPRdK.js";import{B as v}from"./Button-DOxN0nyD.js";import{S as z,V as M}from"./ValidationErrorAlert-CiPPGlGs.js";import{S as P}from"./Stack-uRgVKUQZ.js";import{D as H}from"./DataGrid-CGfFSRbk.js";import"./School-D-WBhuXw.js";import"./createSvgIcon-B29Vkg9N.js";import"./Logout-DkoBwiMD.js";import"./ErrorAlert-HdNPX8K3.js";import"./index-fmPWhlCr.js";import"./isMuiElement-BfcnvGsD.js";import"./index-CI2YhZ_b.js";import"./getThemeProps-BZCJ7Lg2.js";import"./useFormControl-DAgQ4wXR.js";import"./useControlled-BrnxHhem.js";import"./useThemeProps-Qpsl48Kr.js";import"./with-selector-CvhtuJSL.js";import"./Tooltip-bxWjDdLq.js";import"./LinearProgress-kH_c9MBi.js";import"./TableCell-6D6KI-o-.js";function R({open:d,onClose:p,subject:t=null}){const[n,i]=s.useState({name:"",desciption:"",color:"#ff0000",image:null});s.useEffect(()=>{i(t?{name:t.name||"",description:t.description||"",color:t.color||"",image:null}:{name:"",description:"",image:null})},[t]);const l=o=>{const{name:a,type:f,files:x,value:h}=o.target;i(f==="file"?m=>({...m,[a]:x[0]}):m=>({...m,[a]:h}))},u=o=>{o.preventDefault();const a={...n};t?j.Inertia.post(route("subject.update",t.id),{...a,_method:"PUT"},{forceFormData:!0}):j.Inertia.post(route("subject.store"),a,{forceFormData:!0}),p()};return e.jsx(O,{anchor:"right",open:d,onClose:p,sx:{zIndex:o=>o.zIndex.drawer+1},children:e.jsxs(c,{sx:{width:360,p:3},role:"presentation",children:[e.jsxs(c,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(S,{variant:"h6",children:t?"Editar Materia":"Nueva Materia"}),e.jsx(y,{onClick:p,children:e.jsx(T,{})})]}),e.jsxs(c,{component:"form",onSubmit:u,mt:2,children:[e.jsx(w,{fullWidth:!0,label:"Nombre",name:"name",value:n.name,onChange:l,margin:"normal"}),e.jsx(w,{fullWidth:!0,label:"Descripción",name:"description",value:n.description,onChange:l,margin:"normal"}),e.jsx(S,{variant:"subtitle2",gutterBottom:!0,children:"Color"}),e.jsx("input",{type:"color",name:"color",value:n.color,onChange:l,style:{width:"100%",height:40,border:"none"}}),e.jsx("input",{type:"file",name:"image",onChange:l,style:{marginTop:16}}),e.jsx(v,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},children:t?"Actualizar":"Crear"})]})]})})}function fe(){var C,b;const{errors:d,flash:p}=g().props,{subjects:t}=g().props,[n,i]=s.useState(!1),[l,u]=s.useState(null),o=((b=(C=g().props)==null?void 0:C.flash)==null?void 0:b.success)??null,[a,f]=s.useState(!!o),[x,h]=s.useState(!1);s.useEffect(()=>{o&&f(!0)},[o]),s.useEffect(()=>{Object.keys(d).length>0&&h(!0)},[d]);const m=r=>{u(r),i(!0)},I=()=>{u(null),i(!0)},D=[{field:"name",headerName:"Nombre",flex:1},{field:"description",headerName:"Descripcion",flex:1},{field:"color",headerName:"Color",flex:1,renderCell:r=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.jsx("div",{style:{width:50,height:50,backgroundColor:r.value,borderRadius:4,border:"1px solid #ccc"},title:r.value})})},{field:"image",headerName:"Imagen",flex:1,renderCell:r=>{const N=`/storage/${r.row.image}`;return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:e.jsx("img",{src:N,alt:"Imagen de materia",style:{width:50,height:50,objectFit:"cover",borderRadius:8}})})}},{field:"actions",headerName:"Acciones",width:120,sortable:!1,renderCell:r=>e.jsxs(P,{direction:"row",spacing:1,children:[e.jsx(y,{onClick:()=>m(r.row),color:"primary",children:e.jsx(B,{})}),e.jsx(y,{onClick:()=>E(r.row.id),color:"error",size:"small",children:e.jsx(F,{})})]})}],E=r=>{confirm("¿Estás seguro de eliminar esta materia?")&&j.Inertia.delete(route("subject.destroy",r))};return e.jsxs(A,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Materias"}),children:[e.jsx(k,{title:"Materias"}),e.jsx(z,{open:a,onClose:()=>f(!1),message:o}),e.jsx(M,{open:x,onClose:()=>h(!1),errors:d}),e.jsxs(c,{p:4,children:[e.jsx(c,{display:"flex",justifyContent:"flex-end",mb:2,children:e.jsx(v,{variant:"contained",color:"primary",onClick:I,children:"Crear nueva materia"})}),e.jsx(c,{sx:{height:500,width:"100%"},children:e.jsx(H,{rows:t,columns:D,pageSize:10,rowsPerPageOptions:[5,10,20],disableSelectionOnClick:!0,autoHeight:!0})})]}),e.jsx(R,{open:n,onClose:()=>i(!1),subject:l})]})}export{fe as default};
