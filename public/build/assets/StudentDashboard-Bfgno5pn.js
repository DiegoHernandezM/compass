import{u as P,j as e,H as S,a as z,d as B}from"./app-vMEhybGz.js";import{S as R}from"./StudentLayout-Y5mphk2Q.js";import{P as H}from"./PayPalComponent-C9Bzy-PW.js";import{B as n}from"./Box-BKWdOuJm.js";import{T as r}from"./Modal-CEDmwUrF.js";import{C as l}from"./Card-DVgKtx0g.js";import{C as d}from"./CardContent-Cso5tGMJ.js";import{G as x}from"./Grid-DsJQK1Pp.js";import{R as _,L as A,X as I,Y as $,T as D,a as E}from"./LineChart-ZQS5EKst.js";import{B as h}from"./Button-BH_P4w0r.js";import"./index-Cp2kRUoV.js";import"./MenuBook-CC1MHA_a.js";import"./createSvgIcon-BmYiw_ua.js";import"./Logout-7k1zeLkC.js";import"./Close-yzekcTXF.js";import"./ErrorAlert-BtT46Saj.js";import"./index-Dl0-U46O.js";import"./Alert-DTEmJZo-.js";import"./Tooltip-DUI6y57F.js";import"./useControlled-BX8CzS8A.js";import"./Dialog-BQl1CJd5.js";import"./DialogTitle-DlIOxz7_.js";import"./useThemeProps-BMF9JAJv.js";import"./getThemeProps-HN35Jumh.js";import"./isMuiElement-CE_7VB7y.js";import"./with-selector-ReOnLC-k.js";import"./with-selector-Bo-SfjEj.js";function xe(){var u,j,f;const{kpis:s,sparkline:v,quick:t,subjectsTop:y,user:c,clientId:w,subscriptionExpired:p}=P().props,m=i=>`${i??0}%`,C=[{label:"Promedio",value:m(s==null?void 0:s.avgPercent)},{label:"Mejor",value:m(s==null?void 0:s.bestPercent)},{label:"Ãšltimo",value:m(s==null?void 0:s.latestPercent)},{label:"Completados",value:`${(s==null?void 0:s.testsCompleted)??0}/${(s==null?void 0:s.testsTaken)??0}`},{label:"% FinalizaciÃ³n",value:m(s==null?void 0:s.completionRate)}],T=async()=>{var i,a,g;try{const o=(await z.post(route("student.test.create"),{subject_id:(i=t==null?void 0:t.continueTest)==null?void 0:i.subject_id,level_id:(a=t==null?void 0:t.continueTest)==null?void 0:a.level_id})).data.test.test;o!=null&&o.id&&(console.log(o),B.get(`/student/test/${o.id}/${(g=t==null?void 0:t.continueTest)==null?void 0:g.subject_id}`))}catch(b){console.error(b)}};return e.jsxs(R,{children:[e.jsx(S,{title:"Inicio - Estudiante"}),e.jsx(n,{sx:{p:2},children:p?e.jsxs(n,{sx:{minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx(r,{variant:"h5",color:"error",gutterBottom:!0,children:"Tu suscripciÃ³n ha expirado."}),e.jsx(r,{sx:{mb:4},children:"Por favor renueva tu suscripciÃ³n para continuar utilizando la plataforma."}),e.jsx(n,{sx:{maxWidth:500,width:"100%"},children:e.jsx(H,{user:c,clientId:w,isRenovation:p})})]}):e.jsxs(n,{sx:{p:{xs:2,md:3}},children:[e.jsxs(r,{variant:"h5",sx:{fontWeight:800,mb:1},children:["Â¡Hola! ",c==null?void 0:c.name," ðŸ‘‹"]}),e.jsx(r,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"AquÃ­ tienes un resumen rÃ¡pido de tu progreso y accesos directos para continuar."}),e.jsx(n,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",width:"100%",mb:2},children:C.map((i,a)=>e.jsx(l,{sx:{background:"linear-gradient(135deg, #203764 0%, #203764 90%)",color:"white",boxShadow:9,borderRadius:3,height:"100%",display:"flex",alignItems:"stretch"},children:e.jsxs(d,{sx:{flex:1},children:[e.jsx(r,{variant:"overline",sx:{opacity:.85},children:i.label}),e.jsx(r,{variant:"h4",sx:{fontWeight:800,mt:.5},children:i.value})]})},a))}),e.jsxs(x,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[e.jsx(x,{size:{xs:12,sm:12,md:8},sx:{display:"flex"},children:e.jsx(l,{sx:{flex:1,width:"100%",boxShadow:9},children:e.jsxs(d,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"EvoluciÃ³n reciente"}),e.jsx(n,{sx:{flex:1,minHeight:180,width:"100%"},children:e.jsx(_,{width:"100%",height:"100%",children:e.jsxs(A,{data:v||[],children:[e.jsx(I,{dataKey:"label"}),e.jsx($,{domain:[0,100]}),e.jsx(D,{}),e.jsx(E,{type:"monotone",dataKey:"percent",stroke:"#22c55e",dot:!1})]})})})]})})}),e.jsx(x,{size:{xs:12,sm:12,md:4},sx:{display:"flex"},children:e.jsx(l,{sx:{flex:1,boxShadow:9},children:e.jsxs(d,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Acciones rÃ¡pidas"}),e.jsxs(n,{sx:{mt:1,display:"grid",gap:1.2},children:[t!=null&&t.continueTest?e.jsxs(h,{variant:"contained",size:"large",onClick:T,children:["Continuar Ãºltimo test (",((u=t==null?void 0:t.continueTest)==null?void 0:u.subject)??"â€”",")"]}):e.jsx(h,{variant:"outlined",size:"large",disabled:!0,children:"No tienes tests pendientes"}),t!=null&&t.weakestSubject?e.jsxs(h,{variant:"text",onClick:()=>window.location.href=route("student.subject.index"),children:["Reforzar: ",(j=t==null?void 0:t.weakestSubject)==null?void 0:j.name," (",(f=t==null?void 0:t.weakestSubject)==null?void 0:f.average,"%)"]}):null]})]})})})]}),e.jsx(l,{children:e.jsxs(d,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Top materias"}),e.jsx(x,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:(y||[]).map((i,a)=>e.jsx(x,{size:{xs:12,sm:12,md:3},children:e.jsx(l,{sx:{borderRadius:3,maxHeight:120,minHeight:120,boxShadow:9},children:e.jsxs(d,{children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700},children:i.name}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Intentos: ",i.attempts]}),e.jsxs(r,{variant:"body2",children:["Promedio: ",i.average,"%"]})]})})},a))})]})})]})})]})}export{xe as default};
