import{r as a,j as o,q as Y,$ as ee}from"./app-BYlaDNnQ.js";import{S as oe}from"./StudentLayout-B3pIwG7L.js";import{D as te}from"./Dialog-BkevDDps.js";import{D as se,a as re,b as ne}from"./DialogTitle-BBJkTvsX.js";import{g as M,a as _,b as Q,s as T,e as q,f as G,T as F,r as N,c as H,m as J,d as ae,j as $,l as A,n as L,k as ie,h as ce}from"./Typography-Cz5b46_Z.js";import{B as I}from"./Button-BDi1-Yqn.js";import{S as le}from"./Slide-m2awDBZU.js";import{B}from"./Box-Dj2jFWQR.js";import{C as de}from"./Card-DI_nibiu.js";import{C as ue}from"./CardContent-DJVGTtfk.js";import{a as pe,L as fe,F as me,S as ge}from"./Stack-D44wqBzF.js";import{P as xe}from"./Paper-ucf8npUG.js";import{u as he}from"./useControlled-BJIFv_eh.js";import{F as Ce}from"./FormGroup-DqGVAQyp.js";import{u as be}from"./useFormControl-pAwNMFrR.js";import{c as je,a as ve}from"./Modal-BdzuD8Hn.js";import"./Logout-DCbHmxsU.js";import"./Person-BIvb6oU0.js";import"./index-BFwf8Ka5.js";import"./Portal-AG3BFHip.js";import"./index-BmOyq_06.js";import"./useThemeProps-CODjRCaF.js";import"./getThemeProps-B8kFXMoc.js";function Re(e){return M("MuiDialogContentText",e)}_("MuiDialogContentText",["root"]);const Se=e=>{const{classes:t}=e,r=G({root:["root"]},Re,t);return{...t,...r}},ke=T(F,{shouldForwardProp:e=>N(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ye=a.forwardRef(function(t,s){const r=Q({props:t,name:"MuiDialogContentText"}),{children:i,className:g,...c}=r,d=Se(c);return o.jsx(ke,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:c,className:q(d.root,g),...r,classes:d})}),we=H(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Pe=H(o.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Fe=T("span",{shouldForwardProp:N})({position:"relative",display:"flex"}),Te=T(we)({transform:"scale(1)"}),De=T(Pe)(J(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function W(e){const{checked:t=!1,classes:s={},fontSize:r}=e,i={...e,checked:t};return o.jsxs(Fe,{className:s.root,ownerState:i,children:[o.jsx(Te,{fontSize:r,className:s.background,ownerState:i}),o.jsx(De,{fontSize:r,className:s.dot,ownerState:i})]})}const Z=a.createContext(void 0);function Ie(){return a.useContext(Z)}function $e(e){return M("MuiRadio",e)}const V=_("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ze=e=>{const{classes:t,color:s,size:r}=e,i={root:["root",`color${$(s)}`,r!=="medium"&&`size${$(r)}`]};return{...t,...G(i,$e,t)}},Be=T(pe,{shouldForwardProp:e=>N(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.size!=="medium"&&t[`size${$(s.size)}`],t[`color${$(s.color)}`]]}})(J(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:A(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(L()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:A(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(L()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${V.checked}`]:{color:(e.vars||e).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Me(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const _e=o.jsx(W,{checked:!0}),qe=o.jsx(W,{}),Ge=a.forwardRef(function(t,s){const r=Q({props:t,name:"MuiRadio"}),{checked:i,checkedIcon:g=_e,color:c="primary",icon:d=qe,name:u,onChange:k,size:p="medium",className:m,disabled:C,disableRipple:x=!1,slots:h={},slotProps:S={},inputProps:b,...y}=r,l=be();let j=C;l&&typeof j>"u"&&(j=l.disabled),j??(j=!1);const w={...r,disabled:j,disableRipple:x,color:c,size:p},P=ze(w),v=Ie();let n=i;const f=je(k,v&&v.onChange);let R=u;v&&(typeof n>"u"&&(n=Me(v.value,r.value)),typeof R>"u"&&(R=v.name));const z=S.input??b,[K,X]=ae("root",{ref:s,elementType:Be,className:q(P.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:h,slotProps:S,...y},getSlotProps:D=>({...D,onChange:(O,...U)=>{var E;(E=D.onChange)==null||E.call(D,O,...U),f(O,...U)}}),ownerState:w,additionalProps:{type:"radio",icon:a.cloneElement(d,{fontSize:d.props.fontSize??p}),checkedIcon:a.cloneElement(g,{fontSize:g.props.fontSize??p}),disabled:j,name:R,checked:n,slots:h,slotProps:{input:typeof z=="function"?z(w):z}}});return o.jsx(K,{...X,classes:P})});function Ne(e){return M("MuiRadioGroup",e)}_("MuiRadioGroup",["root","row","error"]);const Oe=e=>{const{classes:t,row:s,error:r}=e;return G({root:["root",s&&"row",r&&"error"]},Ne,t)},Ue=a.forwardRef(function(t,s){const{actions:r,children:i,className:g,defaultValue:c,name:d,onChange:u,value:k,...p}=t,m=a.useRef(null),C=Oe(t),[x,h]=he({controlled:k,default:c,name:"RadioGroup"});a.useImperativeHandle(r,()=>({focus:()=>{let l=m.current.querySelector("input:not(:disabled):checked");l||(l=m.current.querySelector("input:not(:disabled)")),l&&l.focus()}}),[]);const S=ie(s,m),b=ce(d),y=a.useMemo(()=>({name:b,onChange(l){h(l.target.value),u&&u(l,l.target.value)},value:x}),[b,u,h,x]);return o.jsx(Z.Provider,{value:y,children:o.jsx(Ce,{role:"radiogroup",ref:S,className:q(C.root,g),...p,children:i})})}),Ee=a.forwardRef(function(t,s){return o.jsx(le,{direction:"up",ref:s,...t})});function Ae({open:e,close:t}){return o.jsx(a.Fragment,{children:o.jsxs(te,{open:e,slots:{transition:Ee},keepMounted:!0,onClose:t,"aria-describedby":"alert-dialog-slide-description",PaperProps:{sx:{borderRadius:4}},children:[o.jsx(se,{children:"Explicación"}),o.jsx(re,{children:o.jsx(ye,{id:"alert-dialog-slide-description",children:"Let Google help apps determine location. This means sending anonymous location data to Google, even when no apps are running."})}),o.jsx(ne,{children:o.jsx(I,{onClick:t,children:"Cerrar"})})]})})}function mo(){const{test:e,subject:t}=Y().props,[s,r]=a.useState(0),[i,g]=a.useState({}),c=e.test_questions[s],[d,u]=a.useState(null),[k,p]=a.useState(null),[m,C]=a.useState(!1),[x,h]=a.useState(!1);a.useEffect(()=>{if(m&&!x){const n=setTimeout(()=>{P()},2500);return()=>clearTimeout(n)}},[m,x]);const S=n=>{g({...i,[c.id]:n.target.value})},b=n=>{const f=e.test_questions[s],R=n.toUpperCase()===f.correct_answer;u(R?"correct":"incorrect"),R||p(f.correct_answer),!R&&(f.feedback_text||f.feedback_image)&&(console.log("entro para abrir dialog"),h(!0)),C(!0),setTimeout(()=>{C(!1)},2500)},y=()=>{const n=i[c.id];n&&(b(n),setTimeout(()=>{s<e.test_questions.length-1&&(r(s+1),u(null),p(null))},3e3))},l=()=>{s>0&&r(s-1)},j=()=>{const n=i[c.id];n&&b(n),console.log("Enviar respuestas:",i)},w=(s+1)/e.test_questions.length*100,P=()=>{s<e.test_questions.length-1&&(r(s),u(null),p(null)),C(!1)},v=()=>{h(!1),P()};return o.jsxs(oe,{children:[o.jsx(ee,{title:"Test - Estudiante"}),o.jsxs(B,{sx:{minHeight:"100vh",backgroundColor:"rgba(0, 0, 0, 0.05)",p:2},children:[o.jsx(de,{sx:{mb:4,borderRadius:3,boxShadow:3,backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #e0e0e0"},children:o.jsxs(ue,{sx:{backgroundColor:`${t.color}80`,borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[o.jsxs(F,{variant:"h6",gutterBottom:!0,children:["Test de ",t.name]}),o.jsx(fe,{variant:"determinate",value:w})]})}),o.jsx(B,{sx:{height:"calc(100vh - 220px)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(xe,{elevation:3,sx:{width:"100%",maxWidth:700,p:3,borderRadius:3,boxShadow:3,backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #e0e0e0"},children:[o.jsxs(F,{variant:"subtitle1",gutterBottom:!0,children:["Pregunta ",s+1," de ",e.test_questions.length]}),o.jsx(F,{variant:"h6",gutterBottom:!0,children:c.question_text}),o.jsx(Ue,{value:i[c.id]||"",onChange:S,children:Object.entries(JSON.parse(c.options)).filter(([n,f])=>f).map(([n,f])=>o.jsx(me,{value:n,control:o.jsx(Ge,{}),label:`${n.toUpperCase()}: ${f}`},n))}),o.jsxs(ge,{direction:"row",justifyContent:"space-between",mt:3,children:[o.jsx(I,{variant:"outlined",onClick:l,disabled:s===0,children:"Anterior"}),s<e.test_questions.length-1?o.jsx(I,{variant:"contained",onClick:y,children:"Siguiente"}):o.jsx(I,{variant:"contained",color:"success",onClick:j,children:"Finalizar"})]}),o.jsx(ve,{in:m,timeout:{enter:300,exit:500},onExited:()=>{u(null),p(null),s<e.test_questions.length-1&&r(s+1)},children:o.jsxs(B,{sx:{mt:2,p:2,borderRadius:2,backgroundColor:d==="correct"?"#dcfce7":"#fee2e2",color:d==="correct"?"#15803d":"#b91c1c",display:"flex",alignItems:"center",gap:2},children:[o.jsx("img",{src:d==="correct"?"/assets/correct.gif":"/assets/incorrect.gif",alt:"feedback gif",style:{height:70}}),o.jsx(F,{variant:"h6",children:d==="correct"?"¡Muy bien! Respuesta correcta.":`Incorrecto. La respuesta correcta era: ${k}`})]})})]})})]}),o.jsx(Ae,{open:x,close:v})]})}export{mo as default};
