import{r as l,j as o,q as A,Y as B,a as H}from"./app-CtHqmT_Z.js";import{d as Y}from"./index-YIsatGzK.js";import{B as _,H as G,M as X,I as J}from"./MenuBook-Ag1gZvk9.js";import{S as K,L as Q}from"./Logout-BND-BmH5.js";import{C as Z}from"./Close-CmTZ5dHL.js";import{E as oo,A as to,T as eo,b as so,M as E,f as no}from"./ErrorAlert-QlDqa4cB.js";import{B as I}from"./Box-cZEE6jSJ.js";import{a as z,g as F,b as U,s as D,i as $,d as q,m as k,c as W,l as ro,T as ao,P as io}from"./Modal-pCDfFAv4.js";import{T as lo}from"./Tooltip-DoyuTO1J.js";import{I as L}from"./Alert-DeP0HQsi.js";import{D as co}from"./Dialog-C8Vo4FVT.js";import{D as po,a as uo}from"./DialogTitle-BmJ0i6Jg.js";function xo(t){return z("MuiBottomNavigation",t)}F("MuiBottomNavigation",["root"]);const mo=t=>{const{classes:n}=t;return q({root:["root"]},xo,n)},ho=D("div",{name:"MuiBottomNavigation",slot:"Root"})(k(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}))),go=l.forwardRef(function(n,s){const r=U({props:n,name:"MuiBottomNavigation"}),{children:u,className:b,component:i="div",onChange:h,showLabels:x=!1,value:S,...c}=r,m={...r,component:i,showLabels:x},g=mo(m);return o.jsx(ho,{as:i,className:$(g.root,b),ref:s,ownerState:m,...c,children:l.Children.map(u,(p,v)=>{if(!l.isValidElement(p))return null;const a=p.props.value===void 0?v:p.props.value;return l.cloneElement(p,{selected:a===S,showLabel:p.props.showLabel!==void 0?p.props.showLabel:x,value:a,onChange:h})})})});function fo(t){return z("MuiBottomNavigationAction",t)}const V=F("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),bo=t=>{const{classes:n,showLabel:s,selected:r}=t;return q({root:["root",!s&&!r&&"iconOnly",r&&"selected"],label:["label",!s&&!r&&"iconOnly",r&&"selected"]},fo,n)},vo=D(ro,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:s}=t;return[n.root,!s.showLabel&&!s.selected&&n.iconOnly]}})(k(({theme:t})=>({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${V.selected}`]:{color:(t.vars||t).palette.primary.main},variants:[{props:({showLabel:n,selected:s})=>!n&&!s,style:{paddingTop:14}},{props:({showLabel:n,selected:s,label:r})=>!n&&!s&&!r,style:{paddingTop:0}}]}))),yo=D("span",{name:"MuiBottomNavigationAction",slot:"Label"})(k(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${V.selected}`]:{fontSize:t.typography.pxToRem(14)},variants:[{props:({showLabel:n,selected:s})=>!n&&!s,style:{opacity:0,transitionDelay:"0s"}}]}))),N=l.forwardRef(function(n,s){const r=U({props:n,name:"MuiBottomNavigationAction"}),{className:u,icon:b,label:i,onChange:h,onClick:x,selected:S,showLabel:c,value:m,slots:g={},slotProps:p={},...v}=r,a=r,y=bo(a),M=d=>{h&&h(d,m),x&&x(d)},f={slots:g,slotProps:p},[R,T]=W("root",{elementType:vo,externalForwardedProps:{...f,...v},shouldForwardComponentProp:!0,ownerState:a,ref:s,className:$(y.root,u),additionalProps:{focusRipple:!0},getSlotProps:d=>({...d,onClick:w=>{var e;(e=d.onClick)==null||e.call(d,w),M(w)}})}),[P,j]=W("label",{elementType:yo,externalForwardedProps:f,ownerState:a,className:y.label});return o.jsxs(R,{...T,children:[b,o.jsx(P,{...j,children:i})]})});function Eo({children:t}){var d,w;const[s,r]=l.useState(null),{user:u}=A().props.auth,b=e=>r(e.currentTarget),{url:i}=A(),[h,x]=l.useState(i),{props:S}=A(),c=S.subscriptionExpired??!1,m=i.startsWith("/student/test/"),g=((w=(d=A().props)==null?void 0:d.flash)==null?void 0:w.error)??null,[p,v]=l.useState(!!g),[a,y]=l.useState(null),[M,f]=l.useState(!1),R={"/student-dashboard":"DASHBOARD","/student/subjects":"MATERIAS","/student/stadistics":"RESULTADOS","/student/profile":"MI PERFIL"},T=()=>{confirm("¿Estás seguro de que deseas cerrar sesión?")&&Y.Inertia.post(route("logout"))},P=()=>r(null),j=e=>({color:e?"#b0b0b0":"white",pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer","&.Mui-selected":{color:e?"#b0b0b0":"white"},"& .MuiSvgIcon-root":{color:e?"#9e9e9e":"white",opacity:e?.6:1},opacity:e?.5:1,transition:"none"});return l.useEffect(()=>{let e=!1;return(async()=>{if(i!=="/student/subjects"){y(null);return}try{const{data:C}=await H.get(route("question.instructions.index"));!e&&Array.isArray(C)&&C.length>0&&y(C[0])}catch(C){console.error("No se pudo cargar el instructivo:",C)}})(),()=>{e=!0}},[i]),o.jsxs(I,{sx:{pb:7},children:[o.jsx(oo,{open:p,onClose:()=>v(!1),message:g}),!m&&o.jsx(to,{position:"fixed",elevation:6,sx:{zIndex:e=>e.zIndex.drawer+1,top:5,left:15,right:30,width:"calc(100% - 30px)",borderRadius:"10px",backgroundColor:"#203764",color:"#333",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",px:1},children:o.jsxs(eo,{sx:{display:"flex",justifyContent:"space-between"},children:[o.jsx(I,{sx:{display:"flex",alignItems:"center"},children:o.jsx(ao,{variant:"h6",noWrap:!0,color:"white",children:R[i]||"ATP COMPASS"})}),o.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:1},children:[i==="/student/subjects"&&a&&o.jsx(lo,{title:`Ver instructivo: ${a.original_name}`,arrow:!0,children:o.jsx(L,{onClick:()=>f(!0),sx:{color:"white",bgcolor:"#e53935","&:hover":{bgcolor:"#c62828"},borderRadius:"10px",p:1},children:o.jsx(_,{})})}),o.jsx(L,{onClick:b,color:"inherit",style:{color:"white"},children:o.jsx(K,{})}),o.jsxs(so,{anchorEl:s,open:!!s,onClose:P,children:[o.jsx(E,{disabled:!0,children:u==null?void 0:u.name}),o.jsx(E,{component:B,href:route("student.profile"),children:"Perfil"}),o.jsx(B,{href:route("logout"),method:"post",as:"button",children:o.jsx(E,{children:"Salir"})})]})]})]})}),o.jsx(no,{}),o.jsx(I,{component:"main",sx:{flexGrow:1,p:2,mt:m?0:8},children:t}),o.jsx(io,{sx:{position:"fixed",bottom:0,left:0,right:0,borderTop:"2px solid #e0e0e0",zIndex:e=>e.zIndex.drawer+1e3},elevation:3,children:o.jsx(I,{sx:{overflowX:"auto"},children:o.jsxs(go,{disabled:c,showLabels:!0,value:h,onChange:(e,O)=>{x(O)},sx:{zIndex:e=>e.zIndex.drawer+1e3,width:"max-content",minWidth:"100%",display:"flex",backgroundColor:"#203764"},children:[o.jsx(N,{disabled:c,label:"Inicio",value:"/student-dashboard",icon:o.jsx(G,{}),component:B,href:"/student-dashboard",sx:j(c)}),o.jsx(N,{disabled:c,label:"Materias",value:"/student/subjects",icon:o.jsx(X,{}),component:B,href:"/student/subjects",sx:j(c)}),o.jsx(N,{disabled:c,label:"Resultados",value:"/student/progress",icon:o.jsx(J,{}),component:B,href:"/student/progress",sx:j(c)}),o.jsx(N,{label:"Salir",value:"logout",icon:o.jsx(Q,{}),onClick:T,sx:{color:"white","&.Mui-selected":{color:"white"}}})]})})}),o.jsxs(co,{open:M,onClose:()=>f(!1),fullWidth:!0,maxWidth:"md",PaperProps:{sx:{height:{xs:"85vh",md:"90vh"}}},children:[o.jsxs(po,{sx:{pr:6},children:[(a==null?void 0:a.original_name)||"Instructivo",o.jsx(L,{"aria-label":"cerrar",onClick:()=>f(!1),sx:{position:"absolute",right:8,top:8},children:o.jsx(Z,{})})]}),o.jsx(uo,{dividers:!0,sx:{p:0},children:a&&o.jsx("iframe",{title:"Instructivo PDF",src:route("question.instructions.show",a.id),style:{border:"none",width:"100%",height:"100%"}})})]})]})}export{Eo as S};
