import{r as L,j as e,$ as D}from"./app-DR2zBp-L.js";import{S as P}from"./StudentLayout-B9JNMBSL.js";import{C as h}from"./Card-BM8VDuao.js";import{C as p}from"./CardContent-DBnTqczx.js";import{a as W,g as A,b as E,s as K,k as U,d as X,T as o,u as z,p as x}from"./Modal-CRrWWUgi.js";import{B as b}from"./Box-B9u98YDw.js";import{R as C,X as v,Y as T,T as F,L as G,a as H}from"./LineChart-BrS2XML3.js";import{B as Y,C as $,L as R,a as N,T as _,b as q,c as f,d as I}from"./BarChart-B9wzHrxd.js";import{G as y}from"./Grid-7TVx73JQ.js";import{T as s}from"./TableCell-CBKigoLH.js";import"./index-Dec7CTD8.js";import"./MenuBook-DYL1hG-j.js";import"./createSvgIcon-CZbv8gad.js";import"./Logout-DdC8_0_w.js";import"./ErrorAlert-DCBbolGV.js";import"./index-BDNgXLEW.js";import"./Alert-DvJxy-xn.js";import"./index-DcbLWFTz.js";import"./with-selector-R4GnD-ox.js";import"./useThemeProps-CDjvlXDC.js";import"./getThemeProps-Sn2k6trT.js";import"./isMuiElement-CeqTiZPQ.js";function J(r){return W("MuiTableContainer",r)}A("MuiTableContainer",["root"]);const O=r=>{const{classes:a}=r;return X({root:["root"]},J,a)},Q=K("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),V=L.forwardRef(function(a,i){const l=E({props:a,name:"MuiTableContainer"}),{className:j,component:d="div",...u}=l,c={...l,component:d},g=O(c);return e.jsx(Q,{ref:i,as:d,className:U(g.root,j),ownerState:c,...u})});function Z({subjectsChart:r=[]}){return r.length?e.jsx(h,{sx:{borderRadius:3,boxShadow:4},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",sx:{mb:2,fontWeight:700},children:"Materias con mejor puntaje (% acierto promedio)"}),e.jsx(b,{sx:{width:"100%",height:320},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(Y,{data:r,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"name"}),e.jsx(T,{domain:[0,100],tickFormatter:a=>`${a}%`}),e.jsx(F,{formatter:(a,i)=>i==="percent"?`${a}%`:a}),e.jsx(R,{}),e.jsx(N,{dataKey:"percent",name:"% acierto",fill:"#4f46e5",radius:[6,6,0,0]})]})})})]})}):null}function Fe({stats:r}){const a=z(),i=["#1976d2","#2e7d32","#ed6c02","#9c27b0","#00838f","#5d4037","#c2185b","#7b1fa2","#388e3c","#f57c00","#455a64"],{testsTaken:l,testsCompleted:j,completionRate:d,avgPercent:u,bestPercent:c,latestPercent:g,avgDurationSec:k,timeline:ee=[],recentMistakes:te=[],subjectsChart:w=[],subjectSummary:m=[],multiTimeline:B=[],subjectKeys:M=[]}=r||{},S=t=>`${Math.floor(t/60)}m`;return e.jsxs(P,{children:[e.jsx(D,{title:"Resultados - Estudiante"}),e.jsxs(b,{sx:{p:2,maxWidth:1200,mx:"auto"},children:[e.jsx(y,{container:!0,spacing:{xs:2,md:2},columns:{xs:1,sm:8,md:12},children:[{label:"Promedio",value:`${u}%`},{label:"Mejor",value:`${c}%`},{label:"Último",value:`${g}%`},{label:"Completados",value:`${j}/${l}`},{label:"% Finalización",value:`${d}%`},{label:"Tiempo prom.",value:S(k)}].map((t,n)=>e.jsx(y,{size:{xs:2,sm:2,md:2},sx:{display:"flex",marginBottom:"10px"},children:e.jsx(h,{sx:{marginBottom:"10px",height:"100%",borderRadius:3,overflow:"hidden",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",background:`linear-gradient(135deg,
                    ${x(a.palette.primary.main,.92)} 0%,
                    ${x(a.palette.primary.dark,.92)} 100%)`,color:"#fff",position:"relative",transition:"transform .2s ease, box-shadow .2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 16px 36px rgba(0,0,0,0.3)"},"&::after":{content:'""',position:"absolute",right:-30,top:-30,width:120,height:120,borderRadius:"50%",background:x("#FFFFFF",.08),filter:"blur(2px)"}},children:e.jsxs(p,{sx:{py:3,px:3,minHeight:130,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx(o,{variant:"overline",sx:{opacity:.9,letterSpacing:1,fontWeight:700,color:x("#FFFFFF",.9)},children:t.label}),e.jsx(o,{variant:"h4",sx:{fontWeight:800,lineHeight:1.1,textShadow:"0 2px 6px rgba(0,0,0,0.35)",mt:1,wordBreak:"break-word"},children:t.value})]})})},n))}),e.jsx(h,{sx:{mb:2},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Evolución de puntaje por materia (por intento)"}),e.jsx(b,{sx:{height:320},children:e.jsx(C,{children:e.jsxs(G,{data:B,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"attempt",tickLine:!1}),e.jsx(T,{domain:[0,100],tickFormatter:t=>`${t}%`}),e.jsx(F,{formatter:(t,n)=>[`${t}%`,n]}),e.jsx(R,{}),M.map((t,n)=>e.jsx(H,{type:"monotone",dataKey:t,stroke:i[n%i.length],dot:!1,strokeWidth:2,isAnimationActive:!1},t))]})})}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"El eje X representa el # de intento por materia (1 = primer test de esa materia, etc.)."})]})}),e.jsx(Z,{subjectsChart:w}),e.jsx(h,{sx:{mt:2},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Materias destacadas (acumulado)"}),(m==null?void 0:m.length)===0?e.jsx(o,{variant:"body2",color:"text.secondary",children:"Aún no hay datos suficientes."}):e.jsx(V,{children:e.jsxs(_,{size:"small",children:[e.jsx(q,{children:e.jsxs(f,{children:[e.jsx(s,{children:"Materia"}),e.jsx(s,{align:"right",children:"Mejor"}),e.jsx(s,{align:"right",children:"Menor"}),e.jsx(s,{align:"right",children:"Repeticiones"}),e.jsx(s,{align:"right",children:"Promedio"})]})}),e.jsx(I,{children:m.map(t=>e.jsxs(f,{children:[e.jsx(s,{children:t.subject}),e.jsxs(s,{align:"right",children:[t.best,"%"]}),e.jsxs(s,{align:"right",children:[t.worst,"%"]}),e.jsx(s,{align:"right",children:t.repetitions}),e.jsxs(s,{align:"right",style:{fontWeight:700},children:[t.avg,"%"]})]},t.subject_id))})]})})]})})]})]})}export{Fe as default};
