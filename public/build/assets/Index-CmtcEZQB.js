import{q as g,r as n,j as o,$ as u,a as l,m as b}from"./app-0d6yFiBL.js";import{S as v}from"./StudentLayout-CYZO2y6y.js";import{C as y}from"./Close-TBNbzk7d.js";import{B as e}from"./Box-jjIzmHHO.js";import{G as d}from"./Grid-Cp6qDmi3.js";import{C}from"./Card-DRHg6SLN.js";import{C as j,T as f}from"./Modal-gbTOJ0vi.js";import{B as w}from"./Button-DZLecXkc.js";import{D as I}from"./Dialog-DIQ3_0sA.js";import{D as S,a as k}from"./DialogTitle-BjiMF88d.js";import{I as W}from"./Alert-95mIy3CV.js";import"./index-DdAQxiMs.js";import"./MenuBook-Bd1K640U.js";import"./createSvgIcon-CVVPA2J-.js";import"./Logout-BuLkXXel.js";import"./ErrorAlert-DINqx26F.js";import"./index-Bva4SzmN.js";import"./Tooltip-BUt0T-f7.js";import"./useControlled-C_4z3jeZ.js";import"./useThemeProps-SxF8V0GZ.js";import"./getThemeProps-D40aptl2.js";import"./isMuiElement-npmQ0S8K.js";function V(){const{props:c}=g(),{subjects:x}=c,[i,p]=n.useState(null),[m,a]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const{data:r}=await l.get(route("question.instructions.index"));Array.isArray(r)&&r.length>0&&p(r[0])}catch(r){console.error("No se pudo cargar el instructivo:",r)}})()},[]);const h=async t=>{try{const s=(await l.post(route("student.test.create"),{subject_id:t.id,level_id:t.level_id})).data.test.test;s!=null&&s.id&&b.get(`/student/test/${s.id}/${t.id}`)}catch(r){console.error(r)}};return o.jsxs(v,{children:[o.jsx(u,{title:"Materias - Estudiante"}),o.jsxs(e,{sx:{bgcolor:"#f5f6fa",minHeight:"100vh",py:4,px:{xs:2,sm:4,md:6}},children:[o.jsx(e,{sx:{maxWidth:"1200px",mx:"auto"},children:o.jsx(d,{container:!0,spacing:4,justifyContent:"center",children:x.map(t=>o.jsx(d,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,sx:{display:"flex",justifyContent:"center"},children:o.jsxs(C,{sx:{width:260,borderRadius:3,overflow:"hidden",display:"flex",flexDirection:"column",bgcolor:"#1e1e1e",color:"#fff"},elevation:4,children:[o.jsxs(e,{sx:{position:"relative"},children:[o.jsx(e,{component:"img",src:t.image?`/storage/${t.image}`:"/images/default.jpg",alt:t.name,sx:{width:"100%",height:180,objectFit:"cover",borderTopLeftRadius:12,borderTopRightRadius:12}}),o.jsx(e,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.4)"}}),o.jsx(e,{sx:{position:"absolute",top:8,left:8,backgroundColor:"rgba(0,0,0,0.5)",boxShadow:3,color:"#fff",px:1.2,py:.5,fontSize:11,fontWeight:"bold",borderRadius:1,zIndex:3},children:t==null?void 0:t.level_name}),o.jsxs(e,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:60,height:60,borderRadius:"50%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:"bold",color:"#fff",boxShadow:3},children:[o.jsx(j,{variant:"determinate",value:t.progress||0,size:63,thickness:3,sx:{position:"absolute",color:"#e6fc6a",zIndex:1}}),o.jsx(e,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:52,height:52,borderRadius:"50%",background:`linear-gradient(145deg, ${t.color||"#555"} 30%, #ffffff20)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:26,fontWeight:"bold",color:"#fff",boxShadow:`
                            0 2px 4px rgba(0, 0, 0, 0.2),
                            inset 0 1px 2px rgba(255, 255, 255, 0.3)
                          `,zIndex:2},children:t.name.charAt(0)})]})]}),o.jsxs(e,{sx:{p:2,flexGrow:1,display:"flex",flexDirection:"column",bgcolor:"#fff",color:"#000"},children:[o.jsx(f,{variant:"overline",gutterBottom:!0,sx:{fontWeight:"bold",mb:1,textAlign:"center",color:"#000"},children:t.name.toUpperCase()}),o.jsx(f,{variant:"body2",sx:{color:"#555",mb:2,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),o.jsx(e,{sx:{mt:"auto",textAlign:"left"},children:o.jsx(w,{size:"small",variant:"outlined",sx:{textTransform:"none",fontWeight:500,fontSize:"0.6rem",backgroundColor:"#fff",color:"#4f4f4f",borderRadius:"999px",borderColor:"#ccc",padding:"4px 12px","&:hover":{backgroundColor:"#f5f5f5",borderColor:"#bbb"},minWidth:"auto"},onClick:()=>h(t),children:t.progress>0?"Continuar práctica":"Iniciar práctica"})})]})]})},t.id))})}),o.jsxs(I,{open:m,onClose:()=>a(!1),fullWidth:!0,maxWidth:"md",PaperProps:{sx:{height:{xs:"85vh",md:"90vh"},display:"flex",flexDirection:"column"}},children:[o.jsxs(S,{sx:{pr:6,flex:"0 0 auto"},children:[(i==null?void 0:i.original_name)||"Instructivo",o.jsx(W,{"aria-label":"cerrar",onClick:()=>a(!1),sx:{position:"absolute",right:8,top:8},children:o.jsx(y,{})})]}),o.jsx(k,{dividers:!0,sx:{p:0,flex:"1 1 auto",overflow:"hidden"},children:i&&o.jsx("iframe",{title:"Instructivo PDF",src:route("question.instructions.show",i.id),style:{border:"none",width:"100%",height:"100%"}})})]})]})]})}export{V as default};
