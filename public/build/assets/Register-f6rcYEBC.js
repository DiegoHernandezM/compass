import{r,j as e,v as Q,$ as Y}from"./app-CB1Wn47M.js";import{G as Z}from"./GuestLayout-DOahfs6J.js";import{T as P,I as M}from"./TextInput-DR8aqFTY.js";import{I}from"./InputLabel-KM-fpgQ3.js";import{P as ee}from"./PrimaryButton-CM7wPEdf.js";import{P as te,C as oe}from"./Person-DjbzGOHO.js";import{P as se}from"./PayPalComponent-BkI1tlaO.js";/* empty css                    */import{a as E,g as U,b as z,s as k,i as F,c as _,j as O,m as re,T as B}from"./Typography-BBQVAT80.js";import{A as ae}from"./Alert-rix-SGyC.js";import{D as ne}from"./Dialog-CCMh28DC.js";import{D as le,a as ie,b as ce}from"./DialogTitle-Bj7pWyjk.js";import{B as W}from"./Button-DYDiXRFL.js";import"./createSvgIcon-BvPnfHpE.js";import"./Modal-BDyfTLlR.js";import"./Fade-D_kNIubh.js";import"./IconButton-NxM1byrw.js";const $=r.createContext({}),H=r.createContext({});function pe(s){return E("MuiStep",s)}U("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const de=s=>{const{classes:t,orientation:o,alternativeLabel:n,completed:i}=s;return _({root:["root",o,n&&"alternativeLabel",i&&"completed"]},pe,t)},me=k("div",{name:"MuiStep",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),G=r.forwardRef(function(t,o){const n=z({props:t,name:"MuiStep"}),{active:i,children:p,className:u,component:f="div",completed:c,disabled:d,expanded:m=!1,index:l,last:x,...b}=n,{activeStep:g,connector:v,alternativeLabel:j,orientation:N,nonLinear:C}=r.useContext($);let[h=!1,w=!1,S=!1]=[i,c,d];g===l?h=i!==void 0?i:!0:!C&&g>l?w=c!==void 0?c:!0:!C&&g<l&&(S=d!==void 0?d:!0);const D=r.useMemo(()=>({index:l,last:x,expanded:m,icon:l+1,active:h,completed:w,disabled:S}),[l,x,m,h,w,S]),L={...n,active:h,orientation:N,alternativeLabel:j,completed:w,disabled:S,expanded:m,component:f},T=de(L),R=e.jsxs(me,{as:f,className:F(T.root,u),ref:o,ownerState:L,...b,children:[v&&j&&l!==0?v:null,p]});return e.jsx(H.Provider,{value:D,children:v&&!j&&l!==0?e.jsxs(r.Fragment,{children:[v,R]}):R})});function ue(s){return E("MuiStepConnector",s)}U("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const xe=s=>{const{classes:t,orientation:o,alternativeLabel:n,active:i,completed:p,disabled:u}=s,f={root:["root",o,n&&"alternativeLabel",i&&"active",p&&"completed",u&&"disabled"],line:["line",`line${O(o)}`]};return _(f,ue,t)},fe=k("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),ve=k("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.line,t[`line${O(o.orientation)}`]]}})(re(({theme:s})=>{const t=s.palette.mode==="light"?s.palette.grey[400]:s.palette.grey[600];return{display:"block",borderColor:s.vars?s.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),he=r.forwardRef(function(t,o){const n=z({props:t,name:"MuiStepConnector"}),{className:i,...p}=n,{alternativeLabel:u,orientation:f="horizontal"}=r.useContext($),{active:c,disabled:d,completed:m}=r.useContext(H),l={...n,alternativeLabel:u,orientation:f,active:c,completed:m,disabled:d},x=xe(l);return e.jsx(fe,{className:F(x.root,i),ref:o,ownerState:l,...p,children:e.jsx(ve,{className:x.line,ownerState:l})})});function be(s){return E("MuiStepper",s)}U("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const ge=s=>{const{orientation:t,nonLinear:o,alternativeLabel:n,classes:i}=s;return _({root:["root",t,o&&"nonLinear",n&&"alternativeLabel"]},be,i)},je=k("div",{name:"MuiStepper",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Ce=e.jsx(he,{}),Se=r.forwardRef(function(t,o){const n=z({props:t,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:p=!1,children:u,className:f,component:c="div",connector:d=Ce,nonLinear:m=!1,orientation:l="horizontal",...x}=n,b={...n,nonLinear:m,alternativeLabel:p,orientation:l,component:c},g=ge(b),v=r.Children.toArray(u).filter(Boolean),j=v.map((C,h)=>r.cloneElement(C,{index:h,last:h+1===v.length,...C.props})),N=r.useMemo(()=>({activeStep:i,alternativeLabel:p,connector:d,nonLinear:m,orientation:l}),[i,p,d,m,l]);return e.jsx($.Provider,{value:N,children:e.jsx(je,{as:c,ownerState:b,className:F(g.root,f),ref:o,...x,children:j})})});function Ae(){const[s,t]=r.useState(!1),{data:o,setData:n,post:i,processing:p,errors:u,reset:f}=Q({name:"",email:"",password:"",password_confirmation:""}),[c,d]=r.useState(0),[m,l]=r.useState(!0),[x,b]=r.useState(!1),[g,v]=r.useState(!1),[j,N]=r.useState(""),[C,h]=r.useState(null),[w,S]=r.useState([]),[D,L]=r.useState(""),T=!1;r.useEffect(()=>{fetch("/paypal-client-id").then(a=>a.json()).then(a=>{h(a.client_id)}).catch(a=>{console.error("Error fetching client ID:",a)})},[]);const R=()=>{c===0&&!x||d(a=>a+1)},V=a=>{a.preventDefault(),i(route("register"),{onSuccess:y=>{b(!0),d(1),S(y.props.user),L(y.props.password)},onFinish:()=>{f("name","email","password","password_confirmation")}})},J=async a=>{try{const y=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),q=await fetch("/check-email",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":y},body:JSON.stringify({email:a})});if(q.status===200){const X=await q.json();b(!0),t(!0),S(X.user)}else console.log("Guardando usuario")}catch(y){return console.error("Error en la solicitud:",y),!1}},A=()=>{t(!1)},K=()=>{v(!0),t(!1),N("El proceso fue cancelado, intentalo de nuevo."),n({name:"",email:"",password:"",password_confirmation:""})};return e.jsxs(Z,{children:[e.jsx(Y,{title:"Register"}),e.jsxs("div",{className:"w-full py-4 px-2 relative",style:{top:"10px"},children:[e.jsx("div",{className:"flex justify-center w-full overflow-x-auto",children:e.jsxs(Se,{activeStep:c,alternativeLabel:!0,className:"w-full max-w-md",children:[e.jsx(G,{onClick:()=>m&&d(0),className:m?"cursor-pointer":"cursor-not-allowed",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(te,{className:`h-6 w-6 ${m?"text-blue-600":"text-gray-400"}`}),e.jsx(B,{className:"mt-2 text-sm",color:c===0?"blue-gray":"gray",children:"Información"})]})}),e.jsx(G,{onClick:()=>x&&!g&&d(1),className:x&&!g?"cursor-pointer":"cursor-not-allowed",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(oe,{className:`h-6 w-6 ${x?"text-blue-600":"text-gray-400"}`}),e.jsx(B,{className:"mt-2 text-sm",color:c===1?"blue-gray":"gray",children:"Pago"})]})})]})}),c===0&&e.jsxs("div",{className:"mt-2 py-2",children:[e.jsx("br",{}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{htmlFor:"email",value:"Correo"}),e.jsx(P,{id:"email",type:"email",name:"email",value:o.email,className:"mt-1 block w-full",autoComplete:"username",isFocused:!0,onBlur:a=>{J(a.target.value)},onChange:a=>{n("email",a.target.value)},required:!0}),e.jsx(M,{message:u.email,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",value:"Nombre Completo"}),e.jsx(P,{id:"name",name:"name",value:o.name,className:"mt-1 block w-full",autoComplete:"name",onChange:a=>n("name",a.target.value),required:!0}),e.jsx(M,{message:u.name,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{htmlFor:"password",value:"Contraseña"}),e.jsx(P,{id:"password",type:"password",name:"password",value:o.password,className:"mt-1 block w-full",autoComplete:"new-password",onChange:a=>n("password",a.target.value),required:!0}),e.jsx(M,{message:u.password,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{htmlFor:"password_confirmation",value:"Confirmar Contraseña"}),e.jsx(P,{id:"password_confirmation",type:"password",name:"password_confirmation",value:o.password_confirmation,className:"mt-1 block w-full",autoComplete:"new-password",onChange:a=>n("password_confirmation",a.target.value),required:!0}),e.jsx(M,{message:u.password_confirmation,className:"mt-2"})]}),e.jsx("br",{}),e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx(ee,{className:"ms-4",disabled:p,children:"Guardar"})}),j&&e.jsx("div",{className:"mt-4 text-red-800 font-bold flex flex-col items-center",children:e.jsx(ae,{className:"font-bold w-full text-center mt-2",variant:"filled",color:"red",children:j})})]})]}),c===1&&e.jsx("div",{className:"w-full py-8 px-2 relative",children:e.jsxs("div",{className:"w-full py-8 px-2 relative",style:{maxWidth:"750px",minHeight:"200px"},children:[e.jsx("br",{}),e.jsx(se,{user:w,clientId:C,password:D,isRenovation:T})]})})]}),e.jsxs(ne,{open:s,handler:A,children:[e.jsx(le,{children:"Usuario encontrado"}),e.jsx(ie,{children:"El correo electrónico que ingresaste ya pertenece a un usuario existente. Por favor, continúa con el proceso de pago para acceder."}),e.jsxs(ce,{children:[e.jsx(W,{onClick:K,variant:"outlined",color:"error",sx:{mr:2,px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,"&:hover":{backgroundColor:"#ffe6e6",borderColor:"#d32f2f"}},children:"Cancelar"}),e.jsx(W,{onClick:()=>{b(!0),v(!1),A(),R()},variant:"contained",color:"primary",sx:{px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,boxShadow:3,"&:hover":{backgroundColor:"#1565c0"}},children:"Continuar"})]})]})]})}export{Ae as default};
