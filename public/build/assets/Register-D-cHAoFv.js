import{r as a,j as e,b as Q,H as Y}from"./app-b12iEX9E.js";import{G as Z}from"./GuestLayout-DCDtMC2n.js";import{T as P,I as M}from"./TextInput-CJWnIR0T.js";import{I as D}from"./InputLabel-heGxo8fH.js";import{P as ee}from"./PrimaryButton-DN5rwljX.js";import{P as te,C as oe}from"./Person-B1SpOd4I.js";import{P as se}from"./PayPalComponent-DQ4E-Y_w.js";/* empty css                    */import{a as E,g as F,b as U,s as I,i as _,d as z,j as G,m as ae,T as B}from"./Modal-c0OVIqbF.js";import{A as re}from"./Alert-ZK2Q2snE.js";import{D as ne}from"./Dialog-DGBfQvGM.js";import{D as le,a as ie}from"./DialogTitle-DVOnJMJo.js";import{D as ce}from"./DialogActions-BAej-WlD.js";import{B as H}from"./Button-BwjxN3ui.js";import"./createSvgIcon-ZBJ0OOO8.js";const A=a.createContext({}),O=a.createContext({});function de(s){return E("MuiStep",s)}F("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const pe=s=>{const{classes:t,orientation:o,alternativeLabel:n,completed:i}=s;return z({root:["root",o,n&&"alternativeLabel",i&&"completed"]},de,t)},me=I("div",{name:"MuiStep",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),W=a.forwardRef(function(t,o){const n=U({props:t,name:"MuiStep"}),{active:i,children:d,className:u,component:x="div",completed:c,disabled:p,expanded:m=!1,index:l,last:f,...b}=n,{activeStep:g,connector:v,alternativeLabel:j,orientation:N,nonLinear:C}=a.useContext(A);let[h=!1,S=!1,w=!1]=[i,c,p];g===l?h=i!==void 0?i:!0:!C&&g>l?S=c!==void 0?c:!0:!C&&g<l&&(w=p!==void 0?p:!0);const k=a.useMemo(()=>({index:l,last:f,expanded:m,icon:l+1,active:h,completed:S,disabled:w}),[l,f,m,h,S,w]),L={...n,active:h,orientation:N,alternativeLabel:j,completed:S,disabled:w,expanded:m,component:x},T=pe(L),R=e.jsxs(me,{as:x,className:_(T.root,u),ref:o,ownerState:L,...b,children:[v&&j&&l!==0?v:null,d]});return e.jsx(O.Provider,{value:k,children:v&&!j&&l!==0?e.jsxs(a.Fragment,{children:[v,R]}):R})});function ue(s){return E("MuiStepConnector",s)}F("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const fe=s=>{const{classes:t,orientation:o,alternativeLabel:n,active:i,completed:d,disabled:u}=s,x={root:["root",o,n&&"alternativeLabel",i&&"active",d&&"completed",u&&"disabled"],line:["line",`line${G(o)}`]};return z(x,ue,t)},xe=I("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),ve=I("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.line,t[`line${G(o.orientation)}`]]}})(ae(({theme:s})=>{const t=s.palette.mode==="light"?s.palette.grey[400]:s.palette.grey[600];return{display:"block",borderColor:s.vars?s.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),he=a.forwardRef(function(t,o){const n=U({props:t,name:"MuiStepConnector"}),{className:i,...d}=n,{alternativeLabel:u,orientation:x="horizontal"}=a.useContext(A),{active:c,disabled:p,completed:m}=a.useContext(O),l={...n,alternativeLabel:u,orientation:x,active:c,completed:m,disabled:p},f=fe(l);return e.jsx(xe,{className:_(f.root,i),ref:o,ownerState:l,...d,children:e.jsx(ve,{className:f.line,ownerState:l})})});function be(s){return E("MuiStepper",s)}F("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const ge=s=>{const{orientation:t,nonLinear:o,alternativeLabel:n,classes:i}=s;return z({root:["root",t,o&&"nonLinear",n&&"alternativeLabel"]},be,i)},je=I("div",{name:"MuiStepper",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Ce=e.jsx(he,{}),we=a.forwardRef(function(t,o){const n=U({props:t,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:d=!1,children:u,className:x,component:c="div",connector:p=Ce,nonLinear:m=!1,orientation:l="horizontal",...f}=n,b={...n,nonLinear:m,alternativeLabel:d,orientation:l,component:c},g=ge(b),v=a.Children.toArray(u).filter(Boolean),j=v.map((C,h)=>a.cloneElement(C,{index:h,last:h+1===v.length,...C.props})),N=a.useMemo(()=>({activeStep:i,alternativeLabel:d,connector:p,nonLinear:m,orientation:l}),[i,d,p,m,l]);return e.jsx(A.Provider,{value:N,children:e.jsx(je,{as:c,ownerState:b,className:_(g.root,x),ref:o,...f,children:j})})});function ze(){const[s,t]=a.useState(!1),{data:o,setData:n,post:i,processing:d,errors:u,reset:x}=Q({name:"",email:"",password:"",password_confirmation:""}),[c,p]=a.useState(0),[m,l]=a.useState(!0),[f,b]=a.useState(!1),[g,v]=a.useState(!1),[j,N]=a.useState(""),[C,h]=a.useState(null),[S,w]=a.useState([]),[k,L]=a.useState(""),T=!1;a.useEffect(()=>{fetch("/paypal-client-id").then(r=>r.json()).then(r=>{h(r.client_id)}).catch(r=>{console.error("Error fetching client ID:",r)})},[]);const R=()=>{c===0&&!f||p(r=>r+1)},V=r=>{r.preventDefault(),i(route("register"),{onSuccess:y=>{b(!0),p(1),w(y.props.user),L(y.props.password)},onFinish:()=>{x("name","email","password","password_confirmation")}})},J=async r=>{try{const y=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),$=await fetch("/check-email",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":y},body:JSON.stringify({email:r})});if($.status===200){const X=await $.json();b(!0),t(!0),w(X.user),window.location.href="/login"}else console.log("Guardando usuario")}catch(y){return console.error("Error en la solicitud:",y),!1}},q=()=>{t(!1)},K=()=>{v(!0),t(!1),N("El proceso fue cancelado, intentalo de nuevo."),n({name:"",email:"",password:"",password_confirmation:""})};return e.jsxs(Z,{children:[e.jsx(Y,{title:"Register"}),e.jsxs("div",{className:"w-full py-4 px-2 relative",style:{top:"10px"},children:[e.jsx("div",{className:"flex justify-center w-full overflow-x-auto",children:e.jsxs(we,{activeStep:c,alternativeLabel:!0,className:"w-full max-w-md",children:[e.jsx(W,{onClick:()=>m&&p(0),className:m?"cursor-pointer":"cursor-not-allowed",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(te,{className:`h-6 w-6 ${m?"text-blue-600":"text-gray-400"}`}),e.jsx(B,{className:"mt-2 text-sm",color:c===0?"blue-gray":"gray",children:"Información"})]})}),e.jsx(W,{onClick:()=>f&&!g&&p(1),className:f&&!g?"cursor-pointer":"cursor-not-allowed",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(oe,{className:`h-6 w-6 ${f?"text-blue-600":"text-gray-400"}`}),e.jsx(B,{className:"mt-2 text-sm",color:c===1?"blue-gray":"gray",children:"Pago"})]})})]})}),c===0&&e.jsxs("div",{className:"mt-2 py-2",children:[e.jsx("br",{}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mt-4",children:[e.jsx(D,{htmlFor:"email",value:"Correo"}),e.jsx(P,{id:"email",type:"email",name:"email",value:o.email,className:"mt-1 block w-full",autoComplete:"username",isFocused:!0,onBlur:r=>{J(r.target.value)},onChange:r=>{n("email",r.target.value)},required:!0}),e.jsx(M,{message:u.email,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"name",value:"Nombre Completo"}),e.jsx(P,{id:"name",name:"name",value:o.name,className:"mt-1 block w-full",autoComplete:"name",onChange:r=>n("name",r.target.value),required:!0}),e.jsx(M,{message:u.name,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsx(D,{htmlFor:"password",value:"Contraseña"}),e.jsx(P,{id:"password",type:"password",name:"password",value:o.password,className:"mt-1 block w-full",autoComplete:"new-password",onChange:r=>n("password",r.target.value),required:!0}),e.jsx(M,{message:u.password,className:"mt-2"})]}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsx(D,{htmlFor:"password_confirmation",value:"Confirmar Contraseña"}),e.jsx(P,{id:"password_confirmation",type:"password",name:"password_confirmation",value:o.password_confirmation,className:"mt-1 block w-full",autoComplete:"new-password",onChange:r=>n("password_confirmation",r.target.value),required:!0}),e.jsx(M,{message:u.password_confirmation,className:"mt-2"})]}),e.jsx("br",{}),e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx(ee,{className:"ms-4",disabled:d,children:"Guardar"})}),j&&e.jsx("div",{className:"mt-4 text-red-800 font-bold flex flex-col items-center",children:e.jsx(re,{className:"font-bold w-full text-center mt-2",variant:"filled",color:"red",children:j})})]})]}),c===1&&e.jsx("div",{className:"w-full py-8 px-2 relative",children:e.jsxs("div",{className:"w-full py-8 px-2 relative",style:{maxWidth:"750px",minHeight:"200px"},children:[e.jsx("br",{}),e.jsx(se,{user:S,clientId:C,password:k,isRenovation:T})]})})]}),e.jsxs(ne,{open:s,handler:q,children:[e.jsx(le,{children:"Usuario encontrado"}),e.jsx(ie,{children:"El correo electrónico que ingresaste ya pertenece a un usuario existente. Por favor, continúa con el proceso de pago para acceder."}),e.jsxs(ce,{children:[e.jsx(H,{onClick:K,variant:"outlined",color:"error",sx:{mr:2,px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,"&:hover":{backgroundColor:"#ffe6e6",borderColor:"#d32f2f"}},children:"Cancelar"}),e.jsx(H,{onClick:()=>{b(!0),v(!1),q(),R()},variant:"contained",color:"primary",sx:{px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,boxShadow:3,"&:hover":{backgroundColor:"#1565c0"}},children:"Continuar"})]})]})]})}export{ze as default};
