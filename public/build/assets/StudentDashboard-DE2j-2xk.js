import{q as S,j as e,$ as P,a as z,m as B}from"./app-BEt_j3y4.js";import{S as R}from"./StudentLayout-BNkrsGsG.js";import{P as $}from"./PayPalComponent-DkrKtRKR.js";import{B as n}from"./Box-Dr-7W-DA.js";import{T as r}from"./Modal-lD_zqTbe.js";import{C as l}from"./Card-DD9UwPwp.js";import{C as d}from"./CardContent-DCnC0e5G.js";import{G as x}from"./Grid-BML-Wyrs.js";import{R as A,L as H,X as I,Y as _,T as D,a as E}from"./LineChart-C3h6IZd0.js";import{B as h}from"./Button-CzMRS666.js";import"./index-CFfXh916.js";import"./MenuBook-C9mvBZH0.js";import"./createSvgIcon-DGl_gyGm.js";import"./Logout-C5aYPAln.js";import"./ErrorAlert-CtYq1TXP.js";import"./index-Do89Vuqu.js";import"./Alert-BCaEWAiy.js";import"./useThemeProps-T18jd7Co.js";import"./getThemeProps-BKhbLW6y.js";import"./isMuiElement-BiM0-IJt.js";import"./index-D46uZReY.js";import"./with-selector-CWSniZW3.js";function ne(){var j,u,f;const{kpis:s,sparkline:v,quick:t,subjectsTop:y,user:c,clientId:w,subscriptionExpired:p}=S().props,m=i=>`${i??0}%`,C=[{label:"Promedio",value:m(s==null?void 0:s.avgPercent)},{label:"Mejor",value:m(s==null?void 0:s.bestPercent)},{label:"Ãšltimo",value:m(s==null?void 0:s.latestPercent)},{label:"Completados",value:`${(s==null?void 0:s.testsCompleted)??0}/${(s==null?void 0:s.testsTaken)??0}`},{label:"% FinalizaciÃ³n",value:m(s==null?void 0:s.completionRate)}],T=async()=>{var i,a,g;try{const o=(await z.post(route("student.test.create"),{subject_id:(i=t==null?void 0:t.continueTest)==null?void 0:i.subject_id,level_id:(a=t==null?void 0:t.continueTest)==null?void 0:a.level_id})).data.test.test;o!=null&&o.id&&(console.log(o),B.get(`/student/test/${o.id}/${(g=t==null?void 0:t.continueTest)==null?void 0:g.subject_id}`))}catch(b){console.error(b)}};return e.jsxs(R,{children:[e.jsx(P,{title:"Inicio - Estudiante"}),e.jsx(n,{sx:{p:2},children:p?e.jsxs(n,{sx:{minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx(r,{variant:"h5",color:"error",gutterBottom:!0,children:"Tu suscripciÃ³n ha expirado."}),e.jsx(r,{sx:{mb:4},children:"Por favor renueva tu suscripciÃ³n para continuar utilizando la plataforma."}),e.jsx(n,{sx:{maxWidth:500,width:"100%"},children:e.jsx($,{user:c,clientId:w,isRenovation:p})})]}):e.jsxs(n,{sx:{p:{xs:2,md:3}},children:[e.jsxs(r,{variant:"h5",sx:{fontWeight:800,mb:1},children:["Â¡Hola! ",c==null?void 0:c.name," ðŸ‘‹"]}),e.jsx(r,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"AquÃ­ tienes un resumen rÃ¡pido de tu progreso y accesos directos para continuar."}),e.jsx(n,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",width:"100%",mb:2},children:C.map((i,a)=>e.jsx(l,{sx:{background:"linear-gradient(135deg, #203764 0%, #203764 90%)",color:"white",boxShadow:9,borderRadius:3,height:"100%",display:"flex",alignItems:"stretch"},children:e.jsxs(d,{sx:{flex:1},children:[e.jsx(r,{variant:"overline",sx:{opacity:.85},children:i.label}),e.jsx(r,{variant:"h4",sx:{fontWeight:800,mt:.5},children:i.value})]})},a))}),e.jsxs(x,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[e.jsx(x,{size:{xs:12,sm:12,md:8},sx:{display:"flex"},children:e.jsx(l,{sx:{flex:1,width:"100%",boxShadow:9},children:e.jsxs(d,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"EvoluciÃ³n reciente"}),e.jsx(n,{sx:{flex:1,minHeight:180,width:"100%"},children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(H,{data:v||[],children:[e.jsx(I,{dataKey:"label"}),e.jsx(_,{domain:[0,100]}),e.jsx(D,{}),e.jsx(E,{type:"monotone",dataKey:"percent",stroke:"#22c55e",dot:!1})]})})})]})})}),e.jsx(x,{size:{xs:12,sm:12,md:4},sx:{display:"flex"},children:e.jsx(l,{sx:{flex:1,boxShadow:9},children:e.jsxs(d,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Acciones rÃ¡pidas"}),e.jsxs(n,{sx:{mt:1,display:"grid",gap:1.2},children:[t!=null&&t.continueTest?e.jsxs(h,{variant:"contained",size:"large",onClick:T,children:["Continuar Ãºltimo test (",((j=t==null?void 0:t.continueTest)==null?void 0:j.subject)??"â€”",")"]}):e.jsx(h,{variant:"outlined",size:"large",disabled:!0,children:"No tienes tests pendientes"}),t!=null&&t.weakestSubject?e.jsxs(h,{variant:"text",onClick:()=>window.location.href=route("student.subject.index"),children:["Reforzar: ",(u=t==null?void 0:t.weakestSubject)==null?void 0:u.name," (",(f=t==null?void 0:t.weakestSubject)==null?void 0:f.average,"%)"]}):null]})]})})})]}),e.jsx(l,{children:e.jsxs(d,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Top materias"}),e.jsx(x,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:(y||[]).map((i,a)=>e.jsx(x,{size:{xs:12,sm:12,md:3},children:e.jsx(l,{sx:{borderRadius:3,maxHeight:120,minHeight:120,boxShadow:9},children:e.jsxs(d,{children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:700},children:i.name}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Intentos: ",i.attempts]}),e.jsxs(r,{variant:"body2",children:["Promedio: ",i.average,"%"]})]})})},a))})]})})]})})]})}export{ne as default};
