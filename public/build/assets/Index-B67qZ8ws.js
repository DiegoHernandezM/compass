import{r as t,j as e,q as f,$ as D}from"./app-CVkZfwSy.js";import{D as v,A as N}from"./AuthenticatedLayout-DyDiRa8a.js";import{S as k,V as O,D as T,a as z,E as B,b as W}from"./ValidationErrorAlert-BOD-HWPI.js";import{d as j}from"./index-DB5Bxdpt.js";import{C as F,T as x}from"./Close-B47I7YaU.js";import{u as P,T as V}from"./Typography-DIMplRv3.js";import{B as d}from"./Box-BUpAVUhY.js";import{I as g}from"./IconButton-CQ6-4Jol.js";import{B as y}from"./Button-CDZG7niE.js";import"./isMuiElement-vf60fIMf.js";import"./Logout-dK2QNhTy.js";import"./Paper-z3KL0i_7.js";import"./Grow-TDCbquvR.js";import"./Portal-nE6BIV9I.js";import"./Modal-BGKIjoyp.js";import"./useThemeProps-OcycOdeC.js";import"./Tooltip-BXvjOqnf.js";import"./Alert-BLI1stnq.js";function $({open:m,onClose:p,admin:r=null}){P();const[n,a]=t.useState({name:"",email:"",password:""});t.useEffect(()=>{a(r?{name:r.name||"",email:r.email||"",password:""}:{name:"",email:"",password:""})},[r]);const c=s=>{const{name:i,value:l}=s.target;a(h=>({...h,[i]:l}))},u=s=>{s.preventDefault();const i={...n,role:"admin"};if(r){const l=r.id;j.Inertia.post(route("admins.update",l),{...i,_method:"PUT"})}else j.Inertia.post(route("admins.store"),i);p()};return e.jsx(v,{anchor:"right",open:m,onClose:p,sx:{zIndex:s=>s.zIndex.drawer+1},children:e.jsxs(d,{sx:{width:360,p:3},role:"presentation",children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(V,{variant:"h6",children:r?"Editar Administrador":"Nuevo Administrador"}),e.jsx(g,{onClick:p,children:e.jsx(F,{})})]}),e.jsxs(d,{component:"form",onSubmit:u,mt:2,children:[e.jsx(x,{fullWidth:!0,label:"Nombre",name:"name",value:n.name,onChange:c,margin:"normal"}),e.jsx(x,{fullWidth:!0,label:"Email",name:"email",type:"email",value:n.email,onChange:c,margin:"normal"}),e.jsx(x,{fullWidth:!0,label:"Contraseña",name:"password",type:"password",value:n.password,onChange:c,margin:"normal",helperText:r?"Deja en blanco si no deseas cambiar la contraseña":""}),e.jsx(y,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},children:r?"Actualizar":"Crear"})]})]})})}function ae(){var C,b;const{errors:m,flash:p}=f().props,{administrators:r}=f().props,[n,a]=t.useState(!1),[c,u]=t.useState(null),s=((b=(C=f().props)==null?void 0:C.flash)==null?void 0:b.success)??null,[i,l]=t.useState(!!s),[h,w]=t.useState(!1);t.useEffect(()=>{s&&l(!0)},[s]),t.useEffect(()=>{Object.keys(m).length>0&&w(!0)},[m]);const E=o=>{u(o),a(!0)},S=()=>{u(null),a(!0)},A=[{field:"id",headerName:"ID",width:90},{field:"name",headerName:"Nombre",flex:1},{field:"email",headerName:"Correo",flex:1},{field:"actions",headerName:"Acciones",width:120,sortable:!1,renderCell:o=>e.jsxs(z,{direction:"row",spacing:1,children:[e.jsx(g,{onClick:()=>E(o.row),color:"primary",children:e.jsx(B,{})}),e.jsx(g,{onClick:()=>I(o.row.id),color:"error",size:"small",children:e.jsx(W,{})})]})}],I=o=>{confirm("¿Estás seguro de eliminar este administrador?")&&(console.log("Eliminar administrador con ID:",o),j.Inertia.delete(route("admins.destroy",o)))};return e.jsxs(N,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Administradores"}),children:[e.jsx(D,{title:"Administradores"}),e.jsx(k,{open:i,onClose:()=>l(!1),message:s}),e.jsx(O,{open:h,onClose:()=>w(!1),errors:m}),e.jsxs(d,{p:4,children:[e.jsx(d,{display:"flex",justifyContent:"flex-end",mb:2,children:e.jsx(y,{variant:"contained",color:"primary",onClick:S,children:"Crear nuevo administrador"})}),e.jsx(d,{sx:{height:500,width:"100%"},children:e.jsx(T,{rows:r,columns:A,pageSize:10,rowsPerPageOptions:[5,10,20],disableSelectionOnClick:!0,autoHeight:!0})})]}),e.jsx($,{open:n,onClose:()=>a(!1),admin:c})]})}export{ae as default};
