import{r as t,j as s,R as O}from"./app-CH96BYvV.js";const X="/build/assets/plane-C0XQsGsy.png";function Q({onFinish:v,durationSec:T=300,tickMs:x=140,speed:b=5}){const[l,G]=t.useState(120),[a,L]=t.useState(60),c=70,j=6,[h,w]=t.useState(130),[C,H]=t.useState(0),[d,A]=t.useState(0),[f,I]=t.useState(0),y=Math.round(T*1e3/x),E=t.useRef(h),i=t.useRef(d),p=t.useRef(f),R=t.useRef(!1),u=t.useRef(null);t.useEffect(()=>{E.current=h},[h]),t.useEffect(()=>{i.current=d},[d]),t.useEffect(()=>{p.current=f},[f]);const P=()=>w(n=>Math.max(0,n-20)),k=()=>w(n=>Math.min(300-a,n+20));t.useEffect(()=>{const n=e=>{e.key==="ArrowUp"&&P(),e.key==="ArrowDown"&&k()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[a]);const M=(n=i.current,e=p.current)=>{if(R.current)return;R.current=!0,u.current&&clearInterval(u.current);const r=e>0?Math.round(n/e*100):0;typeof v=="function"&&v(r)};t.useEffect(()=>{const n=20+l/2;return u.current=setInterval(()=>{H(e=>{const r=e+b,o=130+Math.sin((r+n)/30)*60,m=E.current,W=m+a,_=o-c-j,F=o+c+j;if(W>_&&m<F){const S=i.current+1;i.current=S,A(S)}const g=p.current+1;return p.current=g,I(g),g>=y&&M(i.current,g),r})},x),()=>{u.current&&clearInterval(u.current)}},[l,a,c,x,b]);const N=n=>{const e=n.currentTarget;if(e.naturalWidth&&e.naturalHeight){const r=e.naturalHeight/e.naturalWidth,o=Math.round(l*r);L(o),w(m=>Math.min(m,300-o))}};return s.jsxs("div",{children:[s.jsxs("div",{style:{width:300,height:300,background:"black",position:"relative",overflow:"hidden",borderRadius:8},children:[Array.from({length:40}).map((n,e)=>{const r=e*10,o=130+Math.sin((C+r)/30)*60;return s.jsxs(O.Fragment,{children:[s.jsx("div",{style:{position:"absolute",top:o-c,left:r,width:4,height:4,backgroundColor:"white",borderRadius:"50%"}}),s.jsx("div",{style:{position:"absolute",top:o+c,left:r,width:4,height:4,backgroundColor:"white",borderRadius:"50%"}})]},e)}),s.jsx("img",{src:X,alt:"Plane",onLoad:N,style:{position:"absolute",left:20,top:h,width:l,height:a,objectFit:"contain",pointerEvents:"none",userSelect:"none"}})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[s.jsx("button",{onClick:P,className:"px-4 py-2 bg-gray-700 text-white rounded shadow",children:"⬆ Subir"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-700 text-white rounded shadow",children:"Bajar ⬇"})]}),s.jsxs("div",{className:"mt-4 text-sm",children:[s.jsxs("p",{children:["Score: ",d]}),s.jsxs("p",{children:["Ticks: ",f," / ",y]})]})]})}export{Q as default};
