import{j as e,$ as v}from"./app-ik-eAmJ5.js";import{A as T}from"./AuthenticatedLayout-QayYrQtU.js";import{B as i}from"./Box-Cttndrh7.js";import{G as n}from"./Grid-BPVoyWAp.js";import{C as o}from"./Card-5qtjB0zA.js";import{C as l}from"./CardContent-2RkP_DXT.js";import{T as t}from"./Modal-BfxBdzR4.js";import{R as c,L as C,X as j,Y as p,T as u,a as w}from"./LineChart-DlZmo7Rp.js";import{B,C as S,L,a as g,T as R,b as D,c as x,d as K}from"./BarChart-7AgB5J8c.js";import{T as r}from"./TableCell-BXtXFFqj.js";import"./School-CEBIEtH0.js";import"./createSvgIcon-CuMBYvDD.js";import"./Logout-CpYH1Ofv.js";import"./ErrorAlert-CvJhnPpa.js";import"./index-D-Zzepmv.js";import"./Alert-DRfIiPDo.js";import"./isMuiElement-DxrUKZul.js";import"./index-lQH31EgS.js";import"./getThemeProps-PPnXgrHm.js";import"./useThemeProps-Ccp135M-.js";import"./index-KnSCjt_-.js";import"./with-selector-wMyjAuUQ.js";function k({kpis:a={},incomeSeries:b=[],testsBySubject:f=[],topStudents:h=[]}){const m=(s=0)=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",maximumFractionDigits:2}).format(s),y=[{label:"Estudiantes",value:a.studentsCount??0},{label:"Ingresos totales",value:m(a.revenueTotal??0)},{label:"Materias",value:a.subjectsCount??0},{label:"Suscripciones activas",value:a.activeSubscriptions??0},{label:"Promedio general",value:`${a.avgPercent??0}%`}];return e.jsxs(T,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[e.jsx(v,{title:"Dashboard"}),e.jsxs(i,{sx:{p:{xs:2,md:3}},children:[e.jsx(i,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",width:"100%",mb:2},children:y.map((s,d)=>e.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(o,{sx:{background:"linear-gradient(135deg, #203764 0%, #1b2e52 100%)",color:"white",boxShadow:8,borderRadius:3,height:"100%"},children:e.jsxs(l,{children:[e.jsx(t,{variant:"overline",sx:{opacity:.85},children:s.label}),e.jsx(t,{variant:"h4",sx:{fontWeight:800,mt:.5},children:s.value})]})})},d))}),e.jsxs(n,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{marginBottom:"20px"},children:[e.jsx(n,{size:{xs:12,sm:12,md:6},sx:{display:"flex"},children:e.jsx(o,{sx:{flex:1,width:"100%",boxShadow:9},children:e.jsxs(l,{sx:{height:"100%"},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Ingresos por mes"}),e.jsx(i,{sx:{height:260},children:e.jsx(c,{children:e.jsxs(C,{data:b,children:[e.jsx(j,{dataKey:"ym"}),e.jsx(p,{}),e.jsx(u,{formatter:s=>m(s)}),e.jsx(w,{type:"monotone",dataKey:"amount",stroke:"#22c55e",dot:!1})]})})})]})})}),e.jsx(n,{size:{xs:12,sm:12,md:6},sx:{display:"flex"},children:e.jsx(o,{sx:{flex:1,width:"100%",boxShadow:9},children:e.jsxs(l,{sx:{height:"100%"},children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Repetición de test por materia"}),e.jsx(i,{sx:{height:260},children:e.jsx(c,{children:e.jsxs(B,{data:f,children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name",hide:!0}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(L,{}),e.jsx(g,{dataKey:"tests",name:"Tests",fill:"#8884d8"}),e.jsx(g,{dataKey:"percent",name:"% Prom.",fill:"#82ca9d"})]})})})]})})})]}),e.jsx(o,{sx:{flex:1,width:"100%",boxShadow:9},children:e.jsxs(l,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Estudiantes con más tests"}),e.jsxs(R,{size:"small",children:[e.jsx(D,{children:e.jsxs(x,{children:[e.jsx(r,{children:"Nombre"}),e.jsx(r,{align:"right",children:"Tests"}),e.jsx(r,{align:"right",children:"% Promedio"})]})}),e.jsxs(K,{children:[h.map((s,d)=>e.jsxs(x,{hover:!0,children:[e.jsx(r,{children:s.name}),e.jsx(r,{align:"right",children:s.tests_count}),e.jsxs(r,{align:"right",children:[s.avg_percent,"%"]})]},d)),h.length===0&&e.jsx(x,{children:e.jsx(r,{colSpan:3,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Sin datos suficientes."})})})]})]})]})})]})]})}export{k as default};
