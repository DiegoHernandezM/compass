import{r as a,j as t,q as ee,$ as te}from"./app-BvioZF8O.js";import{S as oe}from"./StudentLayout-DmjeDhHB.js";import{D as se}from"./Dialog-Cfi4jFQO.js";import{D as ne,a as re,b as ae}from"./DialogTitle-DO6p_D4A.js";import{g as q,b as E,h as Z,s as D,i as G,f as N,r as O,c as K,m as Q,k as ie,j as $,l as V,d as le,P as ce}from"./ButtonBase-wecvMaha.js";import{T as I,c as H,u as de}from"./Typography-QI3aQ4H6.js";import{B}from"./Button-Te3lklNG.js";import{S as ue}from"./Slide-CCEYf0br.js";import{B as _}from"./Logout-pGeDttDu.js";import{C as pe}from"./Card-ChdKJVyu.js";import{C as fe}from"./CardContent-fVE03UiX.js";import{L as J,S as me}from"./Stack-ITk6zMv5.js";import{a as xe,u as ge}from"./useFormControl-DAU01lwA.js";import{F as he}from"./FormGroup-B6FQnwi3.js";import{S as Ce,F as be}from"./FormControlLabel-Ebh7BGzM.js";import{d as ve,e as Re}from"./Modal-TVW6gwfh.js";import"./Person-Bqs9EoYz.js";import"./index-L7eV0z_h.js";import"./index-BZd934AE.js";import"./useThemeProps-zsyYkAH1.js";import"./getThemeProps-DGe96xVY.js";function je(e){return q("MuiDialogContentText",e)}E("MuiDialogContentText",["root"]);const Se=e=>{const{classes:o}=e,r=N({root:["root"]},je,o);return{...o,...r}},ke=D(I,{shouldForwardProp:e=>O(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ye=a.forwardRef(function(o,s){const r=Z({props:o,name:"MuiDialogContentText"}),{children:l,className:m,...n}=r,d=Se(n);return t.jsx(ke,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:n,className:G(d.root,m),...r,classes:d})}),we=K(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Pe=K(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Te=D("span",{name:"MuiRadioButtonIcon",shouldForwardProp:O})({position:"relative",display:"flex"}),Fe=D(we,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Ie=D(Pe,{name:"MuiRadioButtonIcon"})(Q(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function X(e){const{checked:o=!1,classes:s={},fontSize:r}=e,l={...e,checked:o};return t.jsxs(Te,{className:s.root,ownerState:l,children:[t.jsx(Fe,{fontSize:r,className:s.background,ownerState:l}),t.jsx(Ie,{fontSize:r,className:s.dot,ownerState:l})]})}const Y=a.createContext(void 0);function De(){return a.useContext(Y)}function Me(e){return q("MuiRadio",e)}const W=E("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Be=e=>{const{classes:o,color:s,size:r}=e,l={root:["root",`color${$(s)}`,r!=="medium"&&`size${$(r)}`]};return{...o,...N(l,Me,o)}},$e=D(Ce,{shouldForwardProp:e=>O(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.size!=="medium"&&o[`size${$(s.size)}`],o[`color${$(s.color)}`]]}})(Q(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:V(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(H()).map(([o])=>({props:{color:o,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:V(e.palette[o].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(H()).map(([o])=>({props:{color:o,disabled:!1},style:{[`&.${W.checked}`]:{color:(e.vars||e).palette[o].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function ze(e,o){return typeof o=="object"&&o!==null?e===o:String(e)===String(o)}const _e=t.jsx(X,{checked:!0}),qe=t.jsx(X,{}),Ee=a.forwardRef(function(o,s){const r=Z({props:o,name:"MuiRadio"}),{checked:l,checkedIcon:m=_e,color:n="primary",icon:d=qe,name:p,onChange:P,size:f="medium",className:x,disabled:v,disableRipple:h=!1,slots:C={},slotProps:g={},inputProps:b,...k}=r,c=xe();let R=v;c&&typeof R>"u"&&(R=c.disabled),R??(R=!1);const j={...r,disabled:R,disableRipple:h,color:n,size:f},M=Be(j),S=De();let T=l;const z=ve(P,S&&S.onChange);let y=p;S&&(typeof T>"u"&&(T=ze(S.value,r.value)),typeof y>"u"&&(y=S.name));const F=g.input??b,[i,u]=ie("root",{ref:s,elementType:$e,className:G(M.root,x),shouldForwardComponentProp:!0,externalForwardedProps:{slots:C,slotProps:g,...k},getSlotProps:w=>({...w,onChange:(U,...L)=>{var A;(A=w.onChange)==null||A.call(w,U,...L),z(U,...L)}}),ownerState:j,additionalProps:{type:"radio",icon:a.cloneElement(d,{fontSize:d.props.fontSize??f}),checkedIcon:a.cloneElement(m,{fontSize:m.props.fontSize??f}),disabled:R,name:y,checked:T,slots:C,slotProps:{input:typeof F=="function"?F(j):F}}});return t.jsx(i,{...u,classes:M})});function Ge(e){return q("MuiRadioGroup",e)}E("MuiRadioGroup",["root","row","error"]);const Ne=e=>{const{classes:o,row:s,error:r}=e;return N({root:["root",s&&"row",r&&"error"]},Ge,o)},Oe=a.forwardRef(function(o,s){const{actions:r,children:l,className:m,defaultValue:n,name:d,onChange:p,value:P,...f}=o,x=a.useRef(null),v=Ne(o),[h,C]=ge({controlled:P,default:n,name:"RadioGroup"});a.useImperativeHandle(r,()=>({focus:()=>{let c=x.current.querySelector("input:not(:disabled):checked");c||(c=x.current.querySelector("input:not(:disabled)")),c&&c.focus()}}),[]);const g=le(s,x),b=de(d),k=a.useMemo(()=>({name:b,onChange(c){C(c.target.value),p&&p(c,c.target.value)},value:h}),[b,p,C,h]);return t.jsx(Y.Provider,{value:k,children:t.jsx(he,{role:"radiogroup",ref:g,className:G(v.root,m),...f,children:l})})}),Ue=a.forwardRef(function(o,s){return t.jsx(ue,{direction:"up",ref:s,...o})});function Le({open:e,close:o}){return t.jsx(a.Fragment,{children:t.jsxs(se,{open:e,slots:{transition:Ue},keepMounted:!0,onClose:o,"aria-describedby":"alert-dialog-slide-description",PaperProps:{sx:{borderRadius:4}},children:[t.jsx(ne,{children:"Explicación"}),t.jsx(re,{children:t.jsx(ye,{id:"alert-dialog-slide-description",children:"Let Google help apps determine location. This means sending anonymous location data to Google, even when no apps are running."})}),t.jsx(ae,{children:t.jsx(B,{onClick:o,children:"Cerrar"})})]})})}function ut(){const{test:e,subject:o}=ee().props,[s,r]=a.useState(0),[l,m]=a.useState({}),n=e.test_questions[s],[d,p]=a.useState(null),[P,f]=a.useState(null),[x,v]=a.useState(!1),[h,C]=a.useState(!1),[g,b]=a.useState(null),[k,c]=a.useState(null);a.useEffect(()=>{if(x&&!h){const i=setTimeout(()=>{y()},2500);return()=>clearTimeout(i)}},[x,h]),a.useEffect(()=>{n!=null&&n.limit_time?(b(n.limit_time),c(n.limit_time)):(b(null),c(null))},[n]),a.useEffect(()=>{if(g===null)return;if(g<=0){j("");return}const i=setInterval(()=>{b(u=>u-1)},1e3);return()=>clearInterval(i)},[g]);const R=i=>{m({...l,[n.id]:i.target.value})},j=(i="")=>{const u=i.toUpperCase()===n.correct_answer;m(w=>({...w,[n.id]:i})),p(u?"correct":"incorrect"),u||f(n.correct_answer),!u&&(n.feedback_text||n.feedback_image)&&C(!0),v(!0),setTimeout(()=>{v(!1)},2500)},M=()=>{const i=l[n.id];i&&(j(i),setTimeout(()=>{s<e.test_questions.length-1&&(r(s),p(null),f(null))},3e3))},S=()=>{s>0&&r(s-1)},T=()=>{const i=l[n.id];i&&j(i),console.log("Enviar respuestas:",l)},z=(s+1)/e.test_questions.length*100,y=()=>{s<e.test_questions.length-1&&(r(s),p(null),f(null)),v(!1)},F=()=>{C(!1),y()};return t.jsxs(oe,{children:[t.jsx(te,{title:"Test - Estudiante"}),t.jsxs(_,{sx:{minHeight:"100vh",backgroundColor:"rgba(0, 0, 0, 0.05)",p:2},children:[t.jsx(pe,{sx:{mb:4,borderRadius:3,boxShadow:3,backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #e0e0e0"},children:t.jsxs(fe,{sx:{backgroundColor:`${o.color}80`,borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[t.jsx(I,{variant:"h6",gutterBottom:!0,children:o.name}),t.jsx(J,{variant:"determinate",value:z})]})}),t.jsx(_,{sx:{height:"calc(100vh - 220px)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs(ce,{elevation:3,sx:{width:"100%",maxWidth:700,p:3,borderRadius:3,boxShadow:3,backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #e0e0e0"},children:[k&&t.jsx(J,{variant:"determinate",value:g/k*100,sx:{mt:2,height:10,borderRadius:5}}),t.jsxs(I,{variant:"subtitle1",gutterBottom:!0,children:["Pregunta ",s+1," de ",e.test_questions.length]}),t.jsx(I,{variant:"h6",gutterBottom:!0,children:n.question_text}),t.jsx(Oe,{value:l[n.id]||"",onChange:R,children:Object.entries(JSON.parse(n.options)).filter(([i,u])=>u).map(([i,u])=>t.jsx(be,{value:i,control:t.jsx(Ee,{}),label:`${i.toUpperCase()}: ${u}`},i))}),t.jsxs(me,{direction:"row",justifyContent:"space-between",mt:3,children:[t.jsx(B,{variant:"outlined",onClick:S,disabled:s===0,children:"Anterior"}),s<e.test_questions.length-1?t.jsx(B,{variant:"contained",onClick:M,children:"Siguiente"}):t.jsx(B,{variant:"contained",color:"success",onClick:T,children:"Finalizar"})]}),t.jsx(Re,{in:x,timeout:{enter:300,exit:500},onExited:()=>{p(null),f(null),s<e.test_questions.length-1&&r(s+1)},children:t.jsxs(_,{sx:{mt:2,p:2,borderRadius:2,backgroundColor:d==="correct"?"#dcfce7":"#fee2e2",color:d==="correct"?"#15803d":"#b91c1c",display:"flex",alignItems:"center",gap:2},children:[t.jsx("img",{src:d==="correct"?"/assets/correct.gif":"/assets/incorrect.gif",alt:"feedback gif",style:{height:70}}),t.jsx(I,{variant:"h6",children:d==="correct"?"¡Muy bien! Respuesta correcta.":`Incorrecto. La respuesta correcta era: ${P}`})]})})]})})]}),t.jsx(Le,{open:h,close:F})]})}export{ut as default};
