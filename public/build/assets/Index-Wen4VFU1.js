import{r as s,j as e,q as h,$ as D}from"./app-BqWlvYXa.js";import{D as v,A as k}from"./AuthenticatedLayout-DvPkSqb7.js";import{E as N,D as O}from"./Edit-CF_MWt6O.js";import{d as j}from"./index-CVHOTQJQ.js";import{C as T}from"./Close-DHgTCRnG.js";import{u as z,T as B}from"./Typography-KjnR0wxH.js";import{B as m}from"./Box-BUJooizW.js";import{I as g}from"./IconButton-R5mr-7Si.js";import{T as x}from"./TextField-BSUfUADF.js";import{B as b}from"./Button-B6_tUdkC.js";import{S as W,V as F}from"./ValidationErrorAlert-CVXB3ink.js";import{D as P}from"./DataGrid-CcXzG_69.js";import{S as V}from"./Stack-TDRU_GPF.js";import"./School-DlE_rjWc.js";import"./createSvgIcon-CwdkiJb4.js";import"./Logout-h3QwyMd0.js";import"./Toolbar-C4xSzryH.js";import"./Fade-C2LyS97k.js";import"./index-BltL7mRL.js";import"./Modal-DSVhJoGT.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-C0bkQkL3.js";import"./Alert-olohZ20j.js";import"./index-CUdHpl8X.js";import"./getThemeProps-VTvsTMSr.js";import"./Slide-B7yoBshC.js";import"./useFormControl-Btw4PGPb.js";import"./useThemeProps-CT_TUxfz.js";import"./LinearProgress-CVlH1iMS.js";function $({open:d,onClose:p,admin:r=null}){z();const[i,o]=s.useState({name:"",email:"",password:""});s.useEffect(()=>{o(r?{name:r.name||"",email:r.email||"",password:""}:{name:"",email:"",password:""})},[r]);const c=t=>{const{name:n,value:l}=t.target;o(f=>({...f,[n]:l}))},u=t=>{t.preventDefault();const n={...i,role:"admin"};if(r){const l=r.id;j.Inertia.post(route("admins.update",l),{...n,_method:"PUT"})}else j.Inertia.post(route("admins.store"),n);p()};return e.jsx(v,{anchor:"right",open:d,onClose:p,sx:{zIndex:t=>t.zIndex.drawer+1},children:e.jsxs(m,{sx:{width:360,p:3},role:"presentation",children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(B,{variant:"h6",children:r?"Editar Administrador":"Nuevo Administrador"}),e.jsx(g,{onClick:p,children:e.jsx(T,{})})]}),e.jsxs(m,{component:"form",onSubmit:u,mt:2,children:[e.jsx(x,{fullWidth:!0,label:"Nombre",name:"name",value:i.name,onChange:c,margin:"normal"}),e.jsx(x,{fullWidth:!0,label:"Email",name:"email",type:"email",value:i.email,onChange:c,margin:"normal"}),e.jsx(x,{fullWidth:!0,label:"Contraseña",name:"password",type:"password",value:i.password,onChange:c,margin:"normal",helperText:r?"Deja en blanco si no deseas cambiar la contraseña":""}),e.jsx(b,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},children:r?"Actualizar":"Crear"})]})]})})}function he(){var w,y;const{errors:d,flash:p}=h().props,{administrators:r}=h().props,[i,o]=s.useState(!1),[c,u]=s.useState(null),t=((y=(w=h().props)==null?void 0:w.flash)==null?void 0:y.success)??null,[n,l]=s.useState(!!t),[f,C]=s.useState(!1);s.useEffect(()=>{t&&l(!0)},[t]),s.useEffect(()=>{Object.keys(d).length>0&&C(!0)},[d]);const S=a=>{u(a),o(!0)},E=()=>{u(null),o(!0)},A=[{field:"name",headerName:"Nombre",flex:1},{field:"email",headerName:"Correo",flex:1},{field:"actions",headerName:"Acciones",width:120,sortable:!1,renderCell:a=>e.jsxs(V,{direction:"row",spacing:1,children:[e.jsx(g,{onClick:()=>S(a.row),color:"primary",children:e.jsx(N,{})}),e.jsx(g,{onClick:()=>I(a.row.id),color:"error",size:"small",children:e.jsx(O,{})})]})}],I=a=>{confirm("¿Estás seguro de eliminar este administrador?")&&(console.log("Eliminar administrador con ID:",a),j.Inertia.delete(route("admins.destroy",a)))};return e.jsxs(k,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Administradores"}),children:[e.jsx(D,{title:"Administradores"}),e.jsx(W,{open:n,onClose:()=>l(!1),message:t}),e.jsx(F,{open:f,onClose:()=>C(!1),errors:d}),e.jsxs(m,{p:4,children:[e.jsx(m,{display:"flex",justifyContent:"flex-end",mb:2,children:e.jsx(b,{variant:"contained",color:"primary",onClick:E,children:"Crear nuevo administrador"})}),e.jsx(m,{sx:{height:500,width:"100%"},children:e.jsx(P,{rows:r,columns:A,pageSize:10,rowsPerPageOptions:[5,10,20],disableSelectionOnClick:!0,autoHeight:!0})})]}),e.jsx($,{open:i,onClose:()=>o(!1),admin:c})]})}export{he as default};
