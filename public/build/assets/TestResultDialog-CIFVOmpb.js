import{r as o,j as e}from"./app-B7h2jG03.js";import{u as B,C as k,T as f}from"./Modal-rIM6T3Aq.js";import{u as M,S as w}from"./index-B435XVQQ.js";import{D as R}from"./Dialog-ENnBY_5a.js";import{B as a}from"./Box-DGyrRjtI.js";import{D as W,a as L,b as P}from"./DialogTitle-Cww0Iu9Q.js";import{B as C}from"./Button-8zqjo8_Q.js";const z="/build/assets/result_video-BNB9BkEU.mp4",S=o.forwardRef(function(x,c){return e.jsx(w,{direction:"up",ref:c,...x})});function _({open:r,setReview:x,onClose:c,correct:h=0,total:m=0,onGoToSubjects:D,showReview:I}){const l=B(),v=M(l.breakpoints.down("sm")),n=m>0?Math.round(h/m*100):0,[d,g]=o.useState(0),[A,j]=o.useState(0),y=o.useRef(null),b=d<60?l.palette.error.main:d<80?l.palette.warning.main:l.palette.success.main;let u="";return n>=90?u="¡Excelente resultado!":n>=70?u="¡Bien hecho!":u="Necesitas mejorar, sigue practicando.",o.useEffect(()=>{if(!r)return;g(0),j(0);const t=1200,s=16,i=Math.ceil(t/s);let p=0;const T=setInterval(()=>{p+=1;const E=Math.min(n,Math.round(p/i*n));g(E),j(E),p>=i&&clearInterval(T)},s);return()=>clearInterval(T)},[r,n]),o.useEffect(()=>{const t=y.current;if(!t)return;let s,i;if(r)t.muted=!0,t.playsInline=!0,s=async()=>{try{t.currentTime=1,await t.play()}catch{}},t.readyState>=1?s():t.addEventListener("loadedmetadata",s,{once:!0}),i=()=>{t.currentTime>=5&&(t.pause(),t.removeEventListener("timeupdate",i))},t.addEventListener("timeupdate",i);else try{t.pause()}catch{}return()=>{s&&t.removeEventListener("loadedmetadata",s),i&&t.removeEventListener("timeupdate",i)}},[r]),e.jsxs(R,{open:r,onClose:c,fullWidth:!0,maxWidth:"xs",TransitionComponent:S,scroll:"paper",PaperProps:{sx:{m:v?0:2,borderRadius:v?0:3,position:"relative",backgroundColor:"transparent",display:"flex",flexDirection:"column",maxHeight:"100dvh",overflow:"hidden"}},children:[e.jsx(a,{sx:{position:"absolute",inset:0,zIndex:0,opacity:1,pointerEvents:"none"},children:e.jsx("video",{ref:y,src:z,muted:!0,playsInline:!0,autoPlay:!0,preload:"auto",style:{width:"100%",height:"100%",objectFit:"cover"}},r?"open":"closed")}),e.jsxs(a,{sx:{position:"relative",zIndex:1,backgroundColor:"rgba(255,255,255,0.90)",display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(W,{sx:{fontWeight:700,pb:1},children:"¡Test terminado!"}),e.jsx(L,{dividers:!1,sx:{flex:1,overflowY:"auto",pt:1,pb:2},children:e.jsxs(a,{sx:{display:"grid",placeItems:"center",my:{xs:4,sm:8,md:10}},children:[e.jsxs(a,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(k,{variant:"determinate",value:100,size:140,thickness:5,sx:{color:l.palette.action.disabledBackground,position:"absolute",left:0}}),e.jsx(k,{variant:"determinate",value:d,size:140,thickness:5,sx:{color:b}}),e.jsx(a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:b},children:e.jsxs(f,{variant:"h4",sx:{fontWeight:800},children:[d,"%"]})})]}),e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsxs(f,{variant:"h6",sx:{mt:2,fontWeight:700},children:[h," de ",m]}),e.jsxs(f,{variant:"overline",color:"text.secondary",sx:{mt:.5},children:[e.jsx("strong",{children:u})," Tu porcentaje es ",n,"%."]})]})]})}),e.jsxs(P,{sx:{px:3,pb:2,gap:1,position:"sticky",bottom:0,left:0,right:0,zIndex:2,bgcolor:"rgba(255,255,255,0.92)",backdropFilter:"saturate(180%) blur(6px)"},children:[I?e.jsx(C,{variant:"contained",onClick:()=>{x(),c()},fullWidth:!0,children:"Revisar"}):null,e.jsx(C,{variant:"contained",onClick:D,color:"primary",fullWidth:!0,children:"Materias"})]})]})]})}export{_ as T};
