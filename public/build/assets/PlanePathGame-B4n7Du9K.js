import{r as t,j as s,R as O}from"./app-CbG3K1T6.js";const X="/build/assets/plane-C0XQsGsy.png";function Q({onFinish:b,durationSec:k=25,tickMs:h=140,speed:j=5}){const[d,G]=t.useState(120),[a,L]=t.useState(60),c=70,y=6,[f,w]=t.useState(130),[C,H]=t.useState(0),[p,A]=t.useState(0),[i,M]=t.useState(0),v=Math.round(k*1e3/h),E=t.useRef(f),u=t.useRef(p),m=t.useRef(i),R=t.useRef(!1),l=t.useRef(null);t.useEffect(()=>{E.current=f},[f]),t.useEffect(()=>{u.current=p},[p]),t.useEffect(()=>{m.current=i},[i]);const P=()=>w(n=>Math.max(0,n-20)),S=()=>w(n=>Math.min(300-a,n+20));t.useEffect(()=>{const n=e=>{e.key==="ArrowUp"&&P(),e.key==="ArrowDown"&&S()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[a]);const I=(n=u.current,e=m.current)=>{if(R.current)return;R.current=!0,l.current&&clearInterval(l.current);const r=e>0?Math.round(n/e*100):0;typeof b=="function"&&b(r)};t.useEffect(()=>{const n=20+d/2;return l.current=setInterval(()=>{H(e=>{const r=e+j,o=130+Math.sin((r+n)/30)*60,g=E.current,W=g+a,_=o-c-y,F=o+c+y;if(W>_&&g<F){const T=u.current+1;u.current=T,A(T)}const x=m.current+1;return m.current=x,M(x),x>=v&&I(u.current,x),r})},h),()=>{l.current&&clearInterval(l.current)}},[d,a,c,h,j]);const N=n=>{const e=n.currentTarget;if(e.naturalWidth&&e.naturalHeight){const r=e.naturalHeight/e.naturalWidth,o=Math.round(d*r);L(o),w(g=>Math.min(g,300-o))}};return s.jsxs("div",{children:[s.jsxs("div",{style:{width:300,height:300,background:"black",position:"relative",overflow:"hidden",borderRadius:8},children:[Array.from({length:40}).map((n,e)=>{const r=e*10,o=130+Math.sin((C+r)/30)*60;return s.jsxs(O.Fragment,{children:[s.jsx("div",{style:{position:"absolute",top:o-c,left:r,width:4,height:4,backgroundColor:"white",borderRadius:"50%"}}),s.jsx("div",{style:{position:"absolute",top:o+c,left:r,width:4,height:4,backgroundColor:"white",borderRadius:"50%"}})]},e)}),s.jsx("img",{src:X,alt:"Plane",onLoad:N,style:{position:"absolute",left:20,top:f,width:d,height:a,objectFit:"contain",pointerEvents:"none",userSelect:"none"}})]}),s.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[s.jsx("button",{onClick:P,className:"px-4 py-2 bg-gray-700 text-white rounded shadow",children:"⬆ Subir"}),s.jsx("button",{onClick:S,className:"px-4 py-2 bg-gray-700 text-white rounded shadow",children:"Bajar ⬇"})]}),s.jsxs("div",{className:"mt-4 text-sm",children:[s.jsxs("p",{children:["Score: ",p]}),s.jsxs("p",{children:["Ticks: ",i," / ",v]}),s.jsxs("p",{children:["Tiempo restante: ",Math.max(0,Math.ceil((v-i)*h/1e3)),"s"]})]})]})}export{Q as default};
