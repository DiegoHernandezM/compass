import{r as c,j as o,U as W,v as ge,$ as he}from"./app-qSufqKqr.js";import{G as xe}from"./GuestLayout-CxQO7-4M.js";import{T as $,I as z}from"./TextInput-l1QFu9qr.js";import{I as V}from"./InputLabel-DV1JxMId.js";import{P as Se}from"./PrimaryButton-C38OXiWp.js";import{P as be}from"./Person-C1vKofY0.js";import{c as ye}from"./useSlot-CzPE7KMA.js";import{A as oe}from"./Alert-B0nEnc6C.js";import{C as we}from"./CircularProgress-BIokGxKp.js";import{g as L,j as M,u as U,s as P,c as k,b as B,l as ae,T as J,k as se}from"./Typography-B7ncHGEd.js";import{a as Ce,D as je}from"./Dialog-CuVbJ0al.js";import{B as Z}from"./Button-h9zjHrgN.js";import"./Modal-blQx3lAx.js";import"./ButtonBase-uLIpCoXa.js";import"./Portal-BSBXzUYB.js";import"./Paper-B4qgBRhf.js";function Ne(e){return L("MuiDialogActions",e)}M("MuiDialogActions",["root","spacing"]);const Ee=e=>{const{classes:t,disableSpacing:r}=e;return B({root:["root",!r&&"spacing"]},Ne,t)},Re=P("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ae=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1,...i}=n,l={...n,disableSpacing:s},d=Ee(l);return o.jsx(Re,{className:k(d.root,a),ownerState:l,ref:r,...i})});function Te(e){return L("MuiDialogContent",e)}M("MuiDialogContent",["root","dividers"]);function Ie(e){return L("MuiDialogTitle",e)}const De=M("MuiDialogTitle",["root"]),Pe=e=>{const{classes:t,dividers:r}=e;return B({root:["root",r&&"dividers"]},Te,t)},_e=P("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(ae(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${De.root} + &`]:{paddingTop:0}}}]}))),Oe=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiDialogContent"}),{className:a,dividers:s=!1,...i}=n,l={...n,dividers:s},d=Pe(l);return o.jsx(_e,{className:k(d.root,a),ownerState:l,ref:r,...i})}),Le=e=>{const{classes:t}=e;return B({root:["root"]},Ie,t)},Me=P(J,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Ue=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiDialogTitle"}),{className:a,id:s,...i}=n,l=n,d=Le(l),{titleId:u=s}=c.useContext(Ce);return o.jsx(Me,{component:"h2",className:k(d.root,a),ownerState:l,ref:r,variant:"h6",id:s??u,...i})}),X=c.createContext({}),ie=c.createContext({});function ke(e){return L("MuiStep",e)}M("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Be=e=>{const{classes:t,orientation:r,alternativeLabel:n,completed:a}=e;return B({root:["root",r,n&&"alternativeLabel",a&&"completed"]},ke,t)},qe=P("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Q=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiStep"}),{active:a,children:s,className:i,component:l="div",completed:d,disabled:u,expanded:p=!1,index:f,last:v,...g}=n,{activeStep:S,connector:b,alternativeLabel:C,orientation:j,nonLinear:x}=c.useContext(X);let[y=!1,R=!1,N=!1]=[a,d,u];S===f?y=a!==void 0?a:!0:!x&&S>f?R=d!==void 0?d:!0:!x&&S<f&&(N=u!==void 0?u:!0);const q=c.useMemo(()=>({index:f,last:v,expanded:p,icon:f+1,active:y,completed:R,disabled:N}),[f,v,p,y,R,N]),_={...n,active:y,orientation:j,alternativeLabel:C,completed:R,disabled:N,expanded:p,component:l},F=Be(_),A=o.jsxs(qe,{as:l,className:k(F.root,i),ref:r,ownerState:_,...g,children:[b&&C&&f!==0?b:null,s]});return o.jsx(ie.Provider,{value:q,children:b&&!C&&f!==0?o.jsxs(c.Fragment,{children:[b,A]}):A})});function Fe(e){return L("MuiStepConnector",e)}M("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Ge=e=>{const{classes:t,orientation:r,alternativeLabel:n,active:a,completed:s,disabled:i}=e,l={root:["root",r,n&&"alternativeLabel",a&&"active",s&&"completed",i&&"disabled"],line:["line",`line${se(r)}`]};return B(l,Fe,t)},$e=P("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),ze=P("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.line,t[`line${se(r.orientation)}`]]}})(ae(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Ve=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiStepConnector"}),{className:a,...s}=n,{alternativeLabel:i,orientation:l="horizontal"}=c.useContext(X),{active:d,disabled:u,completed:p}=c.useContext(ie),f={...n,alternativeLabel:i,orientation:l,active:d,completed:p,disabled:u},v=Ge(f);return o.jsx($e,{className:k(v.root,a),ref:r,ownerState:f,...s,children:o.jsx(ze,{className:v.line,ownerState:f})})});function We(e){return L("MuiStepper",e)}M("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Ke=e=>{const{orientation:t,nonLinear:r,alternativeLabel:n,classes:a}=e;return B({root:["root",t,r&&"nonLinear",n&&"alternativeLabel"]},We,a)},Je=P("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Xe=o.jsx(Ve,{}),He=c.forwardRef(function(t,r){const n=U({props:t,name:"MuiStepper"}),{activeStep:a=0,alternativeLabel:s=!1,children:i,className:l,component:d="div",connector:u=Xe,nonLinear:p=!1,orientation:f="horizontal",...v}=n,g={...n,nonLinear:p,alternativeLabel:s,orientation:f,component:d},S=Ke(g),b=c.Children.toArray(i).filter(Boolean),C=b.map((x,y)=>c.cloneElement(x,{index:y,last:y+1===b.length,...x.props})),j=c.useMemo(()=>({activeStep:a,alternativeLabel:s,connector:u,nonLinear:p,orientation:f}),[a,s,u,p,f]);return o.jsx(X.Provider,{value:j,children:o.jsx(Je,{as:d,ownerState:g,className:k(S.root,l),ref:r,...v,children:C})})}),Ye=ye(o.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}));/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w;(function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"})(w||(w={}));var T;(function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"})(T||(T={}));var ee;(function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"})(ee||(ee={}));var h=function(){return h=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},h.apply(this,arguments)};function ce(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function te(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var G="data-react-paypal-script-id",D={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},Ze="Failed to load the PayPal JS SDK script.",le="paypal",Qe="usePayPalScriptReducer must be used within a PayPalScriptProvider";function et(e){return e===void 0&&(e=le),window[e]}function tt(e){for(var t="",r=0;r<e.length;r++){var n=e[r].charCodeAt(0)*r;e[r+1]&&(n+=e[r+1].charCodeAt(0)*(r-1)),t+=String.fromCharCode(97+Math.abs(n)%26)}return t}function rt(e){var t=e.reactComponentName,r=e.sdkComponentKey,n=e.sdkRequestedComponents,a=n===void 0?"":n,s=e.sdkDataNamespace,i=s===void 0?le:s,l=r.charAt(0).toUpperCase().concat(r.substring(1)),d="Unable to render <".concat(t," /> because window.").concat(i,".").concat(l," is undefined."),u=typeof a=="string"?a:a.join(",");if(!u.includes(r)){var p=[u,r].filter(Boolean).join();d+=`
To fix the issue, add '`.concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(p,"'}}>`.")}return d}function ue(e){var t=e,r=G;t[r];var n=ce(t,[r+""]);return"react-paypal-js-".concat(tt(JSON.stringify(n)))}function nt(e){var t=self.document.querySelector("script[".concat(G,'="').concat(e,'"]'));t!=null&&t.parentNode&&t.parentNode.removeChild(t)}function ot(e,t){var r,n;switch(t.type){case T.LOADING_STATUS:return typeof t.value=="object"?h(h({},e),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message}):h(h({},e),{loadingStatus:t.value});case T.RESET_OPTIONS:return nt(e.options[G]),h(h({},e),{loadingStatus:w.PENDING,options:h(h((r={},r[D.DATA_SDK_INTEGRATION_SOURCE]=D.DATA_LIBRARY_VALUE,r),t.value),(n={},n[G]="".concat(ue(t.value)),n))});case T.SET_BRAINTREE_INSTANCE:return h(h({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var de=c.createContext(null);function at(e){if(typeof(e==null?void 0:e.dispatch)=="function"&&e.dispatch.length!==0)return e;throw new Error(Qe)}function pe(){var e=at(c.useContext(de)),t=h(h({},e),{isInitial:e.loadingStatus===w.INITIAL,isPending:e.loadingStatus===w.PENDING,isResolved:e.loadingStatus===w.RESOLVED,isRejected:e.loadingStatus===w.REJECTED});return[t,e.dispatch]}c.createContext({});function st(e){var t=c.useRef(new Proxy({},{get:function(r,n,a){return typeof r[n]=="function"?function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return r[n].apply(r,s)}:Reflect.get(r,n,a)}}));return t.current=Object.assign(t.current,e),t.current}var H=function(e){var t,r=e.className,n=r===void 0?"":r,a=e.disabled,s=a===void 0?!1:a,i=e.children,l=e.forceReRender,d=l===void 0?[]:l,u=ce(e,["className","disabled","children","forceReRender"]),p=s?{opacity:.38}:{},f="".concat(n," ").concat(s?"paypal-buttons-disabled":"").trim(),v=c.useRef(null),g=c.useRef(null),S=st(u),b=pe()[0],C=b.isResolved,j=b.options,x=c.useState(null),y=x[0],R=x[1],N=c.useState(!0),q=N[0],_=N[1],F=c.useState(null),A=F[1];function I(){g.current!==null&&g.current.close().catch(function(){})}return!((t=g.current)===null||t===void 0)&&t.updateProps&&g.current.updateProps({message:u.message}),c.useEffect(function(){if(C===!1)return I;var O=et(j.dataNamespace);if(O===void 0||O.Buttons===void 0)return A(function(){throw new Error(rt({reactComponentName:H.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:j.components,sdkDataNamespace:j[D.DATA_NAMESPACE]}))}),I;var K=function(m,E){R(E),typeof u.onInit=="function"&&u.onInit(m,E)};try{g.current=O.Buttons(h(h({},S),{onInit:K}))}catch(m){return A(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(m))})}return g.current.isEligible()===!1?(_(!1),I):(v.current&&g.current.render(v.current).catch(function(m){v.current===null||v.current.children.length===0||A(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(m))})}),I)},te(te([C],d,!0),[u.fundingSource],!1)),c.useEffect(function(){y!==null&&(s===!0?y.disable().catch(function(){}):y.enable().catch(function(){}))},[s,y]),W.createElement(W.Fragment,null,q?W.createElement("div",{ref:v,style:p,className:f}):i)};H.displayName="PayPalButtons";function it(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function ct(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(r===null)return null;var n=fe(e,t),a=r.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(n.dataset).length)return null;var s=!0;return Object.keys(a.dataset).forEach(function(i){a.dataset[i]!==n.dataset[i]&&(s=!1)}),s?r:null}function lt(e){var t=e.url,r=e.attributes,n=e.onSuccess,a=e.onError,s=fe(t,r);s.onerror=a,s.onload=n,document.head.insertBefore(s,document.head.firstElementChild)}function ut(e){var t=e.sdkBaseUrl,r=e.environment,n=it(e,["sdkBaseUrl","environment"]),a=t||ft(r),s=n,i=Object.keys(s).filter(function(u){return typeof s[u]<"u"&&s[u]!==null&&s[u]!==""}).reduce(function(u,p){var f=s[p].toString();return p=dt(p),p.substring(0,4)==="data"||p==="crossorigin"?u.attributes[p]=f:u.queryParams[p]=f,u},{queryParams:{},attributes:{}}),l=i.queryParams,d=i.attributes;return l["merchant-id"]&&l["merchant-id"].indexOf(",")!==-1&&(d["data-merchant-id"]=l["merchant-id"],l["merchant-id"]="*"),{url:"".concat(a,"?").concat(pt(l)),attributes:d}}function dt(e){var t=function(r,n){return(n?"-":"")+r.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}function pt(e){var t="";return Object.keys(e).forEach(function(r){t.length!==0&&(t+="&"),t+=r+"="+e[r]}),t}function ft(e){return e==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function fe(e,t){t===void 0&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(n){r.setAttribute(n,t[n]),n==="data-csp-nonce"&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function mt(e,t){if(t===void 0&&(t=Promise),me(e,t),typeof document>"u")return t.resolve(null);var r=ut(e),n=r.url,a=r.attributes,s=a["data-namespace"]||"paypal",i=re(s);return a["data-js-sdk-library"]||(a["data-js-sdk-library"]="paypal-js"),ct(n,a)&&i?t.resolve(i):vt({url:n,attributes:a},t).then(function(){var l=re(s);if(l)return l;throw new Error("The window.".concat(s," global variable is not available."))})}function vt(e,t){t===void 0&&(t=Promise),me(e,t);var r=e.url,n=e.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof n<"u"&&typeof n!="object")throw new Error("Expected attributes to be an object.");return new t(function(a,s){if(typeof document>"u")return a();lt({url:r,attributes:n,onSuccess:function(){return a()},onError:function(){var i=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(i)}})})}function re(e){return window[e]}function me(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");var r=e.environment;if(r&&r!=="production"&&r!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}var gt=function(e){var t,r=e.options,n=r===void 0?{clientId:"test"}:r,a=e.children,s=e.deferLoading,i=s===void 0?!1:s,l=c.useReducer(ot,{options:h(h({},n),(t={},t[D.DATA_JS_SDK_LIBRARY]=D.DATA_LIBRARY_VALUE,t[D.DATA_SDK_INTEGRATION_SOURCE]=D.DATA_LIBRARY_VALUE,t[G]="".concat(ue(n)),t)),loadingStatus:i?w.INITIAL:w.PENDING}),d=l[0],u=l[1];return c.useEffect(function(){if(i===!1&&d.loadingStatus===w.INITIAL)return u({type:T.LOADING_STATUS,value:w.PENDING});if(d.loadingStatus===w.PENDING){var p=!0;return mt(d.options).then(function(){p&&u({type:T.LOADING_STATUS,value:w.RESOLVED})}).catch(function(f){console.error("".concat(Ze," ").concat(f)),p&&u({type:T.LOADING_STATUS,value:{state:w.REJECTED,message:String(f)}})}),function(){p=!1}}},[d.options,i,d.loadingStatus]),W.createElement(de.Provider,{value:h(h({},d),{dispatch:u})},a)};function ne(){}c.createContext({cardFieldsForm:null,fields:{},registerField:ne,unregisterField:ne});function ht({user:e,clientId:t,password:r}){const[n,a]=c.useState(""),[s,i]=c.useState(!1),l={layout:"vertical"};let d="1";const u=({showSpinner:p})=>{const[{isPending:f}]=pe();return o.jsxs(o.Fragment,{children:[p&&f&&o.jsx("div",{className:"spinner"}),o.jsx(H,{style:l,disabled:!1,forceReRender:[l],fundingSource:void 0,createOrder:(v,g)=>g.order.create({purchase_units:[{amount:{currency_code:"MXN",value:d},reference_id:e.id}]}),onApprove:(v,g)=>g.order.capture().then(S=>{var j;const b={order:{reference_id:S.purchase_units[0].reference_id,amount:S.purchase_units[0].amount,shipping:{address:((j=S.purchase_units[0].shipping)==null?void 0:j.address)||{}},payments:{captures:[{id:S.id,status:S.status,create_time:S.create_time}]}},password:r},C=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch("/paypal/paypal-payment",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":C},body:JSON.stringify(b),credentials:"same-origin"}).then(x=>x.json()).then(x=>{x.success?(console.log("Pago procesado exitosamente"),a(x.message),i(!0),setTimeout(()=>{window.location.href="/student-dashboard"},5e3)):console.error("Error en la respuesta del backend:",x)}).catch(x=>{console.error("Error en el procesamiento del pago:",x)})})})]})};return o.jsxs("div",{style:{width:"100%",padding:"2rem 0.5rem",maxWidth:"750px",minHeight:"200px",position:"relative"},children:[o.jsx(gt,{options:{"client-id":t,components:"buttons",currency:"MXN",locale:"es_MX"},children:o.jsx(u,{showSpinner:!1})}),n&&o.jsxs("div",{style:{marginTop:"1rem",color:"#166534",fontWeight:"bold",textAlign:"center"},children:[o.jsx(oe,{variant:"filled",color:"green",children:n}),o.jsx("p",{style:{marginTop:"0.5rem"},children:"Serás redirigido ..."}),s&&o.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:o.jsx(we,{color:"success"})})]})]})}function Ot(){const[e,t]=c.useState(!1),{data:r,setData:n,post:a,processing:s,errors:i,reset:l}=ge({name:"",email:"",password:"",password_confirmation:""}),[d,u]=c.useState(0),[p,f]=c.useState(!0),[v,g]=c.useState(!1),[S,b]=c.useState(!1),[C,j]=c.useState(""),[x,y]=c.useState(null),[R,N]=c.useState([]),[q,_]=c.useState("");c.useEffect(()=>{fetch("/paypal-client-id").then(m=>m.json()).then(m=>{y(m.client_id)}).catch(m=>{console.error("Error fetching client ID:",m)})},[]);const F=()=>{d===0&&!v||u(m=>m+1)},A=m=>{m.preventDefault(),a(route("register"),{onSuccess:E=>{g(!0),u(1),N(E.props.user),_(E.props.password)},onFinish:()=>{l("name","email","password","password_confirmation")}})},I=async m=>{try{const E=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Y=await fetch("/check-email",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":E},body:JSON.stringify({email:m})});if(Y.status===200){const ve=await Y.json();g(!0),t(!0),N(ve.user)}else console.log("Guardando usuario")}catch(E){return console.error("Error en la solicitud:",E),!1}},O=()=>{t(!1)},K=()=>{b(!0),t(!1),j("El proceso fue cancelado, intentalo de nuevo."),n({name:"",email:"",password:"",password_confirmation:""})};return o.jsxs(xe,{children:[o.jsx(he,{title:"Register"}),o.jsxs("div",{className:"w-full py-4 px-2 relative",style:{top:"10px"},children:[o.jsx("div",{className:"flex justify-center w-full overflow-x-auto",children:o.jsxs(He,{activeStep:d,alternativeLabel:!0,className:"w-full max-w-md",children:[o.jsx(Q,{onClick:()=>p&&u(0),className:p?"cursor-pointer":"cursor-not-allowed",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(be,{className:`h-6 w-6 ${p?"text-blue-600":"text-gray-400"}`}),o.jsx(J,{className:"mt-2 text-sm",color:d===0?"blue-gray":"gray",children:"Información"})]})}),o.jsx(Q,{onClick:()=>v&&!S&&u(1),className:v&&!S?"cursor-pointer":"cursor-not-allowed",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Ye,{className:`h-6 w-6 ${v?"text-blue-600":"text-gray-400"}`}),o.jsx(J,{className:"mt-2 text-sm",color:d===1?"blue-gray":"gray",children:"Pago"})]})})]})}),d===0&&o.jsxs("div",{className:"mt-2 py-2",children:[o.jsx("br",{}),o.jsxs("form",{onSubmit:A,children:[o.jsxs("div",{className:"mt-4",children:[o.jsx(V,{htmlFor:"email",value:"Correo"}),o.jsx($,{id:"email",type:"email",name:"email",value:r.email,className:"mt-1 block w-full",autoComplete:"username",isFocused:!0,onBlur:m=>{I(m.target.value)},onChange:m=>{n("email",m.target.value)},required:!0}),o.jsx(z,{message:i.email,className:"mt-2"})]}),o.jsx("br",{}),o.jsxs("div",{children:[o.jsx(V,{htmlFor:"name",value:"Nombre Completo"}),o.jsx($,{id:"name",name:"name",value:r.name,className:"mt-1 block w-full",autoComplete:"name",onChange:m=>n("name",m.target.value),required:!0}),o.jsx(z,{message:i.name,className:"mt-2"})]}),o.jsx("br",{}),o.jsxs("div",{className:"mt-4",children:[o.jsx(V,{htmlFor:"password",value:"Contraseña"}),o.jsx($,{id:"password",type:"password",name:"password",value:r.password,className:"mt-1 block w-full",autoComplete:"new-password",onChange:m=>n("password",m.target.value),required:!0}),o.jsx(z,{message:i.password,className:"mt-2"})]}),o.jsx("br",{}),o.jsxs("div",{className:"mt-4",children:[o.jsx(V,{htmlFor:"password_confirmation",value:"Confirmar Contraseña"}),o.jsx($,{id:"password_confirmation",type:"password",name:"password_confirmation",value:r.password_confirmation,className:"mt-1 block w-full",autoComplete:"new-password",onChange:m=>n("password_confirmation",m.target.value),required:!0}),o.jsx(z,{message:i.password_confirmation,className:"mt-2"})]}),o.jsx("br",{}),o.jsx("div",{className:"flex items-center justify-end mt-4",children:o.jsx(Se,{className:"ms-4",disabled:s,children:"Guardar"})}),C&&o.jsx("div",{className:"mt-4 text-red-800 font-bold flex flex-col items-center",children:o.jsx(oe,{className:"font-bold w-full text-center mt-2",variant:"filled",color:"red",children:C})})]})]}),d===1&&o.jsx("div",{className:"w-full py-8 px-2 relative",children:o.jsxs("div",{className:"w-full py-8 px-2 relative",style:{maxWidth:"750px",minHeight:"200px"},children:[o.jsx("br",{}),o.jsx(ht,{user:R,clientId:x,password:q})]})})]}),o.jsxs(je,{open:e,handler:O,children:[o.jsx(Ue,{children:"Usuario encontrado"}),o.jsx(Oe,{children:"El correo electrónico que ingresaste ya pertenece a un usuario existente. Por favor, continúa con el proceso de pago para acceder."}),o.jsxs(Ae,{children:[o.jsx(Z,{onClick:K,variant:"outlined",color:"error",sx:{mr:2,px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,"&:hover":{backgroundColor:"#ffe6e6",borderColor:"#d32f2f"}},children:"Cancelar"}),o.jsx(Z,{onClick:()=>{g(!0),b(!1),O(),F()},variant:"contained",color:"primary",sx:{px:3,py:1,fontWeight:500,textTransform:"none",borderRadius:2,boxShadow:3,"&:hover":{backgroundColor:"#1565c0"}},children:"Continuar"})]})]})]})}export{Ot as default};
