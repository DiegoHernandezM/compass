import{r as S,j as e,$ as L}from"./app-CyFoBk6F.js";import{S as D}from"./StudentLayout-Dtg4VoIo.js";import{C as x}from"./Card-CTEIoGmC.js";import{C as p}from"./CardContent-d5Gbxjbg.js";import{a as P,g as W,b as A,s as E,i as K,d as U,T as o,u as X,n as h}from"./Modal-CrSswB4q.js";import{B as j}from"./Box-B-COTEq4.js";import{R as C,X as y,Y as v,T,L as H,a as Y}from"./LineChart-COZqGa4k.js";import{B as z,C as F,L as $,a as N,T as G,b as _,c as f,d as q}from"./BarChart-CU_m2xjR.js";import{T as s}from"./TableCell-C96OvU_9.js";import"./index-CItOQxQ3.js";import"./MenuBook-BO8iE4cu.js";import"./createSvgIcon--5izQEsH.js";import"./Logout-Cw6o7-ib.js";import"./Close-Did3e7to.js";import"./ErrorAlert-C_AooaYC.js";import"./index-D23vuJ2P.js";import"./Alert-5XDZJpqj.js";import"./Tooltip-McAIk76N.js";import"./useControlled-Ch8AKYEG.js";import"./Dialog-CAAyHbC8.js";import"./DialogTitle-zVn1Kizq.js";import"./index-m_djz5sh.js";import"./with-selector-eHUjIO3O.js";function I(r){return P("MuiTableContainer",r)}W("MuiTableContainer",["root"]);const J=r=>{const{classes:a}=r;return U({root:["root"]},I,a)},O=E("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),Q=S.forwardRef(function(a,i){const l=A({props:a,name:"MuiTableContainer"}),{className:u,component:d="div",...g}=l,c={...l,component:d},b=J(c);return e.jsx(O,{ref:i,as:d,className:K(b.root,u),ownerState:c,...g})});function V({subjectsChart:r=[]}){return r.length?e.jsx(x,{sx:{borderRadius:3,boxShadow:4},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",sx:{mb:2,fontWeight:700},children:"Materias con mejor puntaje (% acierto promedio)"}),e.jsx(j,{sx:{width:"100%",height:320},children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(z,{data:r,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"name"}),e.jsx(v,{domain:[0,100],tickFormatter:a=>`${a}%`}),e.jsx(T,{formatter:(a,i)=>i==="percent"?`${a}%`:a}),e.jsx($,{}),e.jsx(N,{dataKey:"percent",name:"% acierto",fill:"#4f46e5",radius:[6,6,0,0]})]})})})]})}):null}function Fe({stats:r}){const a=X(),i=["#1976d2","#2e7d32","#ed6c02","#9c27b0","#00838f","#5d4037","#c2185b","#7b1fa2","#388e3c","#f57c00","#455a64"],{testsTaken:l,testsCompleted:u,completionRate:d,avgPercent:g,bestPercent:c,latestPercent:b,avgDurationSec:w,timeline:Z=[],recentMistakes:ee=[],subjectsChart:R=[],subjectSummary:m=[],multiTimeline:k=[],subjectKeys:M=[]}=r||{},B=t=>`${Math.floor(t/60)}m`;return e.jsxs(D,{children:[e.jsx(L,{title:"Resultados - Estudiante"}),e.jsxs(j,{sx:{p:2,maxWidth:1200,mx:"auto"},children:[e.jsx(j,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",width:"100%",mb:2},children:[{label:"Promedio",value:`${g}%`},{label:"Mejor",value:`${c}%`},{label:"Último",value:`${b}%`},{label:"Completados",value:`${u}/${l}`},{label:"% Finalización",value:`${d}%`},{label:"Tiempo prom.",value:B(w)}].map((t,n)=>e.jsx(x,{sx:{marginBottom:"10px",height:"100%",borderRadius:3,overflow:"hidden",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",background:`linear-gradient(135deg,
                    ${h(a.palette.primary.main,.92)} 0%,
                    ${h(a.palette.primary.dark,.92)} 100%)`,color:"#fff",position:"relative",transition:"transform .2s ease, box-shadow .2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 16px 36px rgba(0,0,0,0.3)"},"&::after":{content:'""',position:"absolute",right:-30,top:-30,width:120,height:120,borderRadius:"50%",background:h("#FFFFFF",.08),filter:"blur(2px)"}},children:e.jsxs(p,{sx:{py:3,px:3,minHeight:130,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx(o,{variant:"overline",sx:{opacity:.9,letterSpacing:1,fontWeight:700,color:h("#FFFFFF",.9)},children:t.label}),e.jsx(o,{variant:"h4",sx:{fontWeight:800,lineHeight:1.1,textShadow:"0 2px 6px rgba(0,0,0,0.35)",mt:1,wordBreak:"break-word"},children:t.value})]})}))}),e.jsx(x,{sx:{mb:2},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Evolución de puntaje por materia (por intento)"}),e.jsx(j,{sx:{height:320},children:e.jsx(C,{children:e.jsxs(H,{data:k,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"attempt",tickLine:!1}),e.jsx(v,{domain:[0,100],tickFormatter:t=>`${t}%`}),e.jsx(T,{formatter:(t,n)=>[`${t}%`,n]}),e.jsx($,{}),M.map((t,n)=>e.jsx(Y,{type:"monotone",dataKey:t,stroke:i[n%i.length],dot:!1,strokeWidth:2,isAnimationActive:!1},t))]})})}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"El eje X representa el # de intento por materia (1 = primer test de esa materia, etc.)."})]})}),e.jsx(V,{subjectsChart:R}),e.jsx(x,{sx:{mt:2},children:e.jsxs(p,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Materias destacadas (acumulado)"}),(m==null?void 0:m.length)===0?e.jsx(o,{variant:"body2",color:"text.secondary",children:"Aún no hay datos suficientes."}):e.jsx(Q,{children:e.jsxs(G,{size:"small",children:[e.jsx(_,{children:e.jsxs(f,{children:[e.jsx(s,{children:"Materia"}),e.jsx(s,{align:"right",children:"Mejor"}),e.jsx(s,{align:"right",children:"Menor"}),e.jsx(s,{align:"right",children:"Repeticiones"}),e.jsx(s,{align:"right",children:"Promedio"})]})}),e.jsx(q,{children:m.map(t=>e.jsxs(f,{children:[e.jsx(s,{children:t.subject}),e.jsxs(s,{align:"right",children:[t.best,"%"]}),e.jsxs(s,{align:"right",children:[t.worst,"%"]}),e.jsx(s,{align:"right",children:t.repetitions}),e.jsxs(s,{align:"right",style:{fontWeight:700},children:[t.avg,"%"]})]},t.subject_id))})]})})]})})]})]})}export{Fe as default};
